import{P as kl}from"./price-BKQHbuhM.js";import{T as w}from"./trade-DqYenyBJ.js";import{T as Xe}from"./TimerIcon-T8X5nx5j.js";import{_ as Ul,u as Ll,r as n,x as ce,e as Gl,j as f,w as Ye,f as jl,c as ke,m as t,l as s,g as N,y as H,z as Nl,A as Bl,k as b,o as U,a as l,B as W,p as u,D as pe,n as Ze}from"./index-BxHz-Rp6.js";import{x as el}from"./persian-tools.esm-CBI2Czng.js";const $l={class:"goldbox-section buy me-2"},Ol={class:"live-price-box"},Ml={class:"fade-badge"},zl={class:"d-flex justify-center align-center order-2"},Dl={class:"price-in-word"},Fl={class:"goldbox-section"},Rl={class:"wallet-box"},El={class:"d-flex justify-space-between py-2 px-4 my-1"},Al={class:"mb-0"},ql={class:"d-flex justify-space-between py-2 px-4 my-1"},Jl={class:"mb-0"},Kl={class:"my-2"},Hl={class:"goldbox-section sell me-2"},Ql={class:"live-price-box"},Xl={class:"fade-badge"},Yl={class:"d-flex justify-center align-center order-2"},Zl={class:"price-in-word"},ea={class:"goldbox-section"},la={class:"wallet-box sell"},aa={class:"d-flex justify-space-between py-2 px-4 my-1"},ta={class:"mb-0"},sa={class:"d-flex justify-space-between py-2 px-4 my-1"},oa={class:"mb-0"},na={class:"my-2"},ua={class:"d-flex flex-column goldbox-section transfer"},ia={class:"d-flex flex-column flex-md-row justify-center w-100"},da={class:"w-100 me-md-4"},ra={class:"w-100 ms-md-4"},va={key:0,class:"d-flex flex-column"},ca={class:"transfer-otp"},pa={class:"d-flex justify-end w-100 mt-3"},ma={class:"d-flex flex-column goldbox-section use"},fa={key:0,class:"d-flex flex-column align-center"},ga={class:"transfer-otp"},ya={class:"d-flex justify-end w-100 mt-3"},ba={class:"trade-history pa-md-3"},xa={class:"d-flex flex-column flex-md-row justify-space-between"},_a={class:"d-flex justify-start justify-md-end w-100 mt-3"},wa={class:""},Ia={class:""},Va={class:""},Wa={class:""},ha={class:"buyModal-content py-5"},Ta={class:"wallet-badge my-2"},Pa={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},Ca={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},Sa={class:"d-flex justify-space-evenly align-center w-100 my-2"},ka={class:"d-flex"},Ua={class:"my-4"},La={class:"d-flex justify-space-around mt-2 mb-7"},Ga={class:"buyModal-content py-5"},ja={class:"wallet-badge my-2"},Na={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},Ba={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},$a={class:"d-flex justify-space-evenly align-center w-100 my-2"},Oa={class:"d-flex"},Ma={class:"d-flex justify-space-around mt-2 mb-7"},za={class:"transferModal-content py-5"},Da={class:"d-flex align-center"},Fa={class:"d-flex align-center"},Ra={class:"d-flex align-center"},Ea={class:"d-flex align-center"},Aa={class:"d-flex align-center"},qa={class:"d-flex align-center"},Ja={class:"d-flex align-center"},Ka={class:"d-flex align-center"},Ha={class:"d-flex align-center"},Qa={class:"d-flex align-center"},Xa={class:"d-flex align-center"},Ya={class:"d-flex justify-space-around mt-2 mb-7"},Za={class:"transferModal-content py-5"},et={class:"d-flex align-center"},lt={class:"d-flex align-center"},at={class:"d-flex align-center"},tt={class:"d-flex align-center"},st={class:"d-flex align-center"},ot={class:"d-flex align-center"},nt={class:"d-flex align-center"},ut={class:"d-flex align-center"},it={class:"d-flex align-center"},dt={class:"d-flex align-center"},rt={class:"d-flex align-center"},vt={class:"d-flex justify-space-around mt-2 mb-7"},ct={__name:"GoldBoxView",setup(pt){const ll=Ll(),Ue=Nl(),Q=n(!1),me=n(""),X=n(null),R=n(!1),E=n(!1),Le=n(!1),fe=n(!1),ge=n(!1),ye=n(!1),be=n(!1),xe=n(!1),_e=n(!1),Ge=n(!1),je=n(!1),we=n(!1),m=n(""),Y=n(""),d=n(!1),G=n(!1),B=n(!1),$=n(!1),S=n(!1),Z=n(null),O=n(!1),M=n(!1),ee=n(120),le=n(120),x=n({goldWeight:"",nationalCode:""}),p=n({goldWeight:"",branchId:"",sellerId:""}),_=n({}),Ne=n([{label:"آنلاین",value:"0"},{label:"کوچصفهان",value:"1"}]),ae=n(!1),Be=n([]),Ie=n(""),Ve=n(""),$e=n([]),h=n({sellPrice:"",buyPrice:"",change:""}),z=n(30),D=n(!1),Oe=n(),Me=n(),ze=n([{title:"تاریخ",key:"date"},{title:"روش ثبت",key:"tradeType"},{title:"زمان",key:"time"},{title:"وزن طلا(گرم)",key:"goldWeight"},{title:"قیمت نهایی",key:"totalPrice"},{title:"قیمت طلا در لحظه",key:"goldPrice"},{title:"وضعیت",key:"status"}]),al=n([{text:"همه",value:""},{text:"موفق",value:"success"},{text:"ناموفق",value:"failed"},{text:"نامشخص",value:"pending"}]);let te=n(null);const We=n({invoiceId:"",paymentUrl:""});let se=null,oe=null;const c=n({id:"",time:"",date:"",goldWeight:"",invoiceId:"",reciever:{firstName:"",lastName:"",nationalCode:""},sender:{firstName:"",lastName:"",nationalCode:"",goldWeight:""}}),v=n({goldprice:"",goldWeight:""}),r=n({goldPrice:"",goldWeight:""}),L=n({invoiceId:"",isFromWallet:"",balance:0,cartId:null}),F=n({invoiceId:"",isFromWallet:"",balance:0,goldWeight:0}),A=n({type:"",totalPrice:"",goldPrice:"",goldWeight:""}),q=n({type:"",totalPrice:"",goldPrice:"",goldWeight:""}),he=n({status:""}),Te=n({}),J=[a=>!!a||"مقدار ورودی نمی‌تواند خالی باشد",a=>/^\d+(\.\d{1,3})?$/.test(a)||"فقط عدد مجاز است و حداکثر 3 رقم اعشار"],De=[a=>!!a||"کد ملی الزامی است",a=>/^\d{10}$/.test(a)||"کد ملی باید ۱۰ رقم باشد",a=>{if(!/^\d{10}$/.test(a))return!0;const e=+a[9],i=a.split("").slice(0,9).reduce((T,k,I)=>T+ +k*(10-I),0)%11;return i<2&&e===i||i>=2&&e+i===11||"کد ملی نامعتبر است"}],C=a=>a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),tl=ce(()=>{if(v.value.goldprice&&v.value.goldprice!=""){const a=v.value.goldprice.toString().replace(/,/g,""),e=parseInt(a,10);return e<1?"کمتر از یک تومان":el(Math.floor(e))+" تومان"}return""}),sl=ce(()=>{if(r.value.goldPrice&&r.value.goldPrice!=""){const a=r.value.goldPrice.toString().replace(/,/g,""),e=parseInt(a,10);return e<1?"کمتر از یک تومان":el(Math.floor(e))+" تومان"}return""}),Fe=async()=>{try{Le.value=!0;const a=await kl.GoldPrice();return h.value.buyPrice=a.buyPrice,h.value.sellPrice=a.sellPrice,h.value.change=a.change,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{Le.value=!1}},ol=async()=>{try{_e.value=!0;const a=await Bl.GetCarts();return $e.value=a.data.bankAccounts,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{_e.value=!1}},ne=a=>a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),Re=a=>a.replace(/,/g,""),nl=a=>{const e=a.target.selectionStart,i=v.value.goldprice.length,T=Re(v.value.goldprice).replace(/[^0-9]/g,""),k=parseInt(T||0);let g=(k/h.value.buyPrice).toFixed(5).split(""),y=`${g[0]}${g[1]}${g[2]}${g[3]}${g[4]}`;console.log(y),v.value.goldWeight=y;const V=ne(k);v.value.goldprice=V,Ze(()=>{const P=V.length-i;a.target.setSelectionRange(e+P,e+P)})},ul=()=>{v.value.goldWeight=v.value.goldWeight.replace(/[^0-9.]/g,"");const a=v.value.goldWeight.split(".");a.length>1&&(v.value.goldWeight=a[0]+"."+a.slice(1).join("")),a.length>1&&a[1].length>2&&(v.value.goldWeight=a[0]+"."+a[1].slice(0,3)),v.value.goldprice=parseInt(v.value.goldWeight*h.value.buyPrice);const e=parseInt(v.value.goldWeight*h.value.buyPrice);v.value.goldprice=ne(e)},il=a=>{const e=a.target.selectionStart,i=r.value.goldPrice.length,T=Re(r.value.goldPrice).replace(/[^0-9]/g,""),k=parseInt(T||0);let I=(k/h.value.buyPrice).toFixed(5);console.log("ddd",I);let g=I.split(""),y=`${g[0]}${g[1]}${g[2]}${g[3]}${g[4]}`;console.log("ddd222",y),r.value.goldWeight=y;const V=ne(k);r.value.goldPrice=V,Ze(()=>{const P=V.length-i;a.target.setSelectionRange(e+P,e+P)})},dl=()=>{r.value.goldWeight=r.value.goldWeight.replace(/[^0-9.]/g,"");const a=r.value.goldWeight.split(".");a.length>1&&(r.value.goldWeight=a[0]+"."+a.slice(1).join("")),a.length>1&&a[1].length>2&&(r.value.goldWeight=a[0]+"."+a[1].slice(0,3)),r.value.goldPrice=parseInt(r.value.goldWeight*h.value.sellPrice);const e=parseInt(r.value.goldWeight*h.value.sellPrice);r.value.goldPrice=ne(e)},rl=()=>{x.value.goldWeight=x.value.goldWeight.replace(/[^0-9.]/g,"");const a=x.value.goldWeight.split(".");a.length>1&&(a[1]=a[1].slice(0,3),x.value.goldWeight=a[0]+"."+a[1])},vl=()=>{p.value.goldWeight=p.value.goldWeight.replace(/[^0-9.]/g,"");const a=p.value.goldWeight.split(".");a.length>1&&(a[1]=a[1].slice(0,3),p.value.goldWeight=a[0]+"."+a[1])},Ee=()=>{S.value=!S.value},cl=[a=>!!a||"مقدار ورودی نمی‌تواند خالی باشد",a=>/^\d+(\.\d{1,3})?$/.test(a)||"فقط عدد مجاز است و حداکثر 4 رقم اعشار"],pl=async()=>{try{R.value=!0,A.value.type="buy",A.value.totalPrice=v.value.goldprice,A.value.goldWeight=v.value.goldWeight,A.value.goldPrice=h.value.buyPrice;const a=await w.createInvoice(A.value);return L.value.invoiceId=a.transactionId,L.value.balance=a.wallet.balance,B.value=!0,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{R.value=!1}},Ae=async a=>{try{R.value=!0,a=="wallet"?L.value.isFromWallet=!0:L.value.isFromWallet=!1;const e=await w.complateTransaction(L.value);return e.isFromWallet==!0?(B.value=!1,f.replace("/")):(We.value.paymentUrl=e.paymentUrl,We.value.invoiceId=e.invoiceId,window.location.href=We.value.paymentUrl),e}catch(e){e.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=e.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{R.value=!1,Ce()}},ml=async()=>{try{E.value=!0,q.value.type="sell",q.value.totalPrice=r.value.goldPrice,q.value.goldWeight=r.value.goldWeight,q.value.goldPrice=h.value.sellPrice;const a=await w.createSellInvoice(q.value);return F.value.invoiceId=a.transactionId,F.value.balance=a.wallet.balance,F.value.goldWeight=a.wallet.goldWeight,r.value.goldPrice="",r.value.goldPrice="",$.value=!0,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{E.value=!1}},fl=async()=>{try{E.value=!0,F.value.fee=1;const a=await w.complateSellTransaction(F.value);return $.value=!1,Y.value="طلای شما با موفقیت به فروش رسید",G.value=!0,setTimeout(()=>{G.value=!1},5e3),a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{E.value=!1,Pe()}},gl=a=>{he.value.status=a.value,Pe(),Ce()},Pe=async()=>{try{D.value=!0;const a=await w.GoldBoxSellTransactions(he.value);return Oe.value=a,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{D.value=!1}},Ce=async()=>{try{D.value=!0;const a=await w.GoldBoxBuyTransactions(he.value);return Me.value=a,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{D.value=!1}},yl=async a=>{try{const e=await w.VerifyTransaction(a);return Te.value=e,e}catch(e){e.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=e.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}},qe=ce(()=>J.every(a=>a(x.value.goldWeight)===!0)&&De.every(a=>a(x.value.nationalCode)===!0)),bl=async()=>{try{be.value=!0;const a=await w.CreateTransfer(x.value);return Q.value=!0,c.value=a.data,c.value.id=a.data.id,c.value.invoiceId=a.data.invoiceId,c.value.date=a.data.date,c.value.time=a.data.time,c.value.sender.firstName=a.data.sender.firstName,c.value.sender.lastName=a.data.sender.lastName,c.value.sender.nationalCode=a.data.sender.nationalCode,c.value.sender.goldWeight=a.data.sender.wallet.goldWeight,c.value.reciever.firstName=a.data.reciever.firstName,c.value.reciever.lastName=a.data.reciever.lastName,c.value.reciever.nationalCode=a.data.reciever.nationalCode,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{be.value=!1}},xl=async()=>{try{fe.value=!0;const a=await w.TransferOtp(c.value.id);return Q.value=!1,O.value=!0,wl(),a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{fe.value=!1}},_l=async()=>{try{ge.value=!0;const a=await w.VerifyTransferOtp(Ie.value,c.value.id);return O.value=!1,x.value.nationalCode=null,x.value.goldWeight=null,Y.value=a.msg,G.value=!0,setTimeout(()=>{G.value=!1},5e3),a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{ge.value=!1}},wl=()=>{ee.value=120,se&&clearInterval(se),se=setInterval(()=>{ee.value--,ee.value<=0&&(clearInterval(se),O.value&&(O.value=!1,x.value.nationalCode=null,x.value.goldWeight=null,m.value="زمان تایید انتقال به پایان رسیده است",d.value=!0,setTimeout(()=>{d.value=!1},5e3)))},1e3)},Il=()=>{le.value=120,oe&&clearInterval(oe),oe=setInterval(()=>{le.value--,le.value<=0&&(clearInterval(oe),M.value&&(M.value=!1,p.value.branchId=null,p.value.sellerId=null,p.value.goldWeight=null,m.value="زمان استفاده به پایان رسیده است",d.value=!0,setTimeout(()=>{d.value=!1},5e3)))},1e3)},ue=[a=>!!a||"یک مورد را انتخاب کنید!"],Vl=ce(()=>p.value.goldWeight&&!J.some(a=>a(p.value.goldWeight)!==!0)&&p.value.branchId&&!ue.some(a=>a(p.value.branchId)!==!0)&&(p.value.sellerId||!0)&&!ue.some(a=>a(p.value.sellerId)!==!0)),Wl=async()=>{try{Ge.value=!0;const a=await w.GetBranches();return Ne.value=a.data,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{Ge.value=!1}},hl=async a=>{try{je.value=!0;const e=await w.GetSellers(a);return Be.value=e.data,e}catch(e){e.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=e.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{je.value=!1}},Tl=async()=>{try{we.value=!0;const a=await w.CreateUseGold(p.value);return _.value=a.data,console.log(_.value),ae.value=!0,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{we.value=!1}},Pl=async()=>{try{xe.value=!0;const a=await w.UseGoldOtp(_.value.id);return ae.value=!1,M.value=!0,Il(),a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{xe.value=!1}},Cl=async()=>{try{ye.value=!0;const a=await w.VerifyUseGold(Ve.value,_.value.id);return M.value=!1,p.value.goldWeight=null,p.value.sellerId=null,p.value.branchId=null,Y.value=a.msg,G.value=!0,setTimeout(()=>{G.value=!1},5e3),a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{ye.value=!1}};Gl(()=>{Fe(),Ce(),Pe(),ol(),Wl(),ll.GetUser(),setInterval(()=>{Fe()},3e4),me.value=JSON.parse(localStorage.getItem("user"));const a=n({authority:Ue.query.Authority,status:Ue.query.Status});a.value.authority&&a.value.status&&(yl(a.value),a.value.status==="OK"?f.push({name:"success",state:Te.value}):f.push({name:"failed",state:Te.value}))}),Ye(B,a=>{a?(z.value=30,Je()):K()}),Ye($,a=>{a?(z.value=30,Je()):K()});const Je=()=>{K(),te=setInterval(()=>{z.value>0?z.value--:(K(),B.value=!1,$.value=!1)},1e3)},K=()=>{te&&(clearInterval(te),te=null)};return jl(()=>{K()}),(a,e)=>{const i=b("v-col"),T=b("v-tab"),k=b("v-tabs"),I=b("v-row"),g=b("v-text-field"),y=b("v-btn"),V=b("v-divider"),j=b("v-container"),P=b("v-tabs-window-item"),Ke=b("v-otp-input"),Se=b("v-select"),He=b("v-tabs-window"),Sl=b("v-combobox"),ie=b("v-chip"),Qe=b("v-data-table"),de=b("v-alert"),re=b("v-card"),ve=b("v-dialog");return U(),ke("div",null,[t(j,{class:"px-0",fluid:""},{default:s(()=>[t(I,{class:"my-1"},{default:s(()=>[t(i,{cols:"12"},{default:s(()=>e[23]||(e[23]=[l("div",{class:"d-flex flex-column align-center"},[l("h3",{class:"title"},"خرید و فروش طلا")],-1)])),_:1}),t(i,{cols:"12"},{default:s(()=>[t(k,{modelValue:X.value,"onUpdate:modelValue":e[0]||(e[0]=o=>X.value=o),"bg-color":"white",class:"tab-header"},{default:s(()=>[t(T,{value:"one"},{default:s(()=>e[24]||(e[24]=[W("خرید")])),_:1}),t(T,{value:"two"},{default:s(()=>e[25]||(e[25]=[W("فروش")])),_:1}),t(T,{value:"three"},{default:s(()=>e[26]||(e[26]=[W("انتقال")])),_:1}),t(T,{value:"four"},{default:s(()=>e[27]||(e[27]=[W("استفاده")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(He,{modelValue:X.value,"onUpdate:modelValue":e[12]||(e[12]=o=>X.value=o),class:"my-1"},{default:s(()=>[t(P,{value:"one"},{default:s(()=>[t(j,null,{default:s(()=>[t(I,null,{default:s(()=>[t(i,{cols:"12",md:"7",class:"pa-0 my-2"},{default:s(()=>[l("div",$l,[l("div",Ol,[e[28]||(e[28]=l("span",{class:"live-tag"},"لحظه ای",-1)),e[29]||(e[29]=l("p",null,"قیمت طلای 18 عیار:",-1)),l("p",Ml,u(C(h.value.buyPrice))+" تومان ",1)]),l("div",{class:pe(["my-1",{"order-3":S.value,"order-1":!S.value}])},[e[30]||(e[30]=l("span",null,"وزن طلا (گرم)",-1)),t(g,{modelValue:v.value.goldWeight,"onUpdate:modelValue":e[1]||(e[1]=o=>v.value.goldWeight=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:ul,rules:cl,class:"transition-field"},null,8,["modelValue"])],2),l("div",zl,[t(y,{icon:"mdi-swap-horizontal",variant:"text",class:"change-btn",onClick:Ee})]),l("div",{class:pe(["my-1",{"order-1":S.value,"order-3":!S.value}])},[e[31]||(e[31]=l("span",null,"مبلغ (تومان)",-1)),t(g,{modelValue:v.value.goldprice,"onUpdate:modelValue":e[2]||(e[2]=o=>v.value.goldprice=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:nl,class:"transition-field"},null,8,["modelValue"]),l("p",Dl,u(tl.value),1)],2)])]),_:1}),t(i,{cols:"12",md:"5",class:"pa-0 my-2"},{default:s(()=>{var o;return[l("div",Fl,[l("div",Rl,[e[32]||(e[32]=l("p",null,"موجودی کیف پول :",-1)),l("p",null,u(C(+((o=me.value)==null?void 0:o.balance)))+" تومان",1)]),l("div",El,[e[33]||(e[33]=l("p",{class:"mb-0"},"گرم طلا :",-1)),l("p",Al,u(v.value.goldWeight)+" گرم",1)]),t(V),e[36]||(e[36]=l("div",{class:"d-flex justify-space-between py-2 px-4 my-1"},[l("p",{class:"mb-0"},"کارمزد خرید :"),l("p",{class:"mb-0"},"0٪")],-1)),t(V),l("div",ql,[e[34]||(e[34]=l("p",{class:"mb-0"},"مبلغ قابل پرداخت :",-1)),l("p",Jl,u(C(v.value.goldprice))+" تومان ",1)]),l("div",Kl,[t(y,{color:"#00603a",loading:R.value,onClick:pl,block:""},{default:s(()=>e[35]||(e[35]=[W("خرید")])),_:1},8,["loading"])])])]}),_:1})]),_:1})]),_:1})]),_:1}),t(P,{value:"two"},{default:s(()=>[t(j,null,{default:s(()=>[t(I,null,{default:s(()=>[t(i,{cols:"12",md:"7",class:"pa-0 my-2"},{default:s(()=>[l("div",Hl,[l("div",Ql,[e[37]||(e[37]=l("span",{class:"live-tag"},"لحظه ای",-1)),e[38]||(e[38]=l("p",null,"قیمت طلای 18 عیار:",-1)),l("p",Xl,u(C(h.value.buyPrice))+" تومان ",1)]),l("div",{class:pe(["my-1",{"order-3":S.value,"order-1":!S.value}])},[e[39]||(e[39]=l("span",null,"وزن طلا (گرم)",-1)),t(g,{modelValue:r.value.goldWeight,"onUpdate:modelValue":e[3]||(e[3]=o=>r.value.goldWeight=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:dl,rules:J},null,8,["modelValue"])],2),l("div",Yl,[t(y,{icon:"mdi-swap-horizontal",variant:"text",class:"change-btn",onClick:Ee})]),l("div",{class:pe(["my-1",{"order-1":S.value,"order-3":!S.value}])},[e[40]||(e[40]=l("span",null,"مبلغ (تومان)",-1)),t(g,{modelValue:r.value.goldPrice,"onUpdate:modelValue":e[4]||(e[4]=o=>r.value.goldPrice=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:il},null,8,["modelValue"]),l("p",Zl,u(sl.value),1)],2)])]),_:1}),t(i,{cols:"12",md:"5",class:"pa-0 my-2"},{default:s(()=>[l("div",ea,[l("div",la,[e[41]||(e[41]=l("p",null,"موجودی صندوق طلا :",-1)),l("p",null,u(me.value.goldWeight)+" گرم",1)]),l("div",aa,[e[42]||(e[42]=l("p",{class:"mb-0"},"گرم طلا :",-1)),l("p",ta,u(r.value.goldWeight)+" گرم",1)]),t(V),e[45]||(e[45]=l("div",{class:"d-flex justify-space-between py-2 px-4 my-1"},[l("p",{class:"mb-0"},"کارمزد فروش :"),l("p",{class:"mb-0"},"1٪")],-1)),t(V),l("div",sa,[e[43]||(e[43]=l("p",{class:"mb-0"},"مبلغ قابل پرداخت :",-1)),l("p",oa,u(C(r.value.goldPrice))+" تومان ",1)]),l("div",na,[t(y,{color:"#930606",loading:E.value,onClick:ml,block:""},{default:s(()=>e[44]||(e[44]=[W("فروش")])),_:1},8,["loading"])])])]),_:1})]),_:1})]),_:1})]),_:1}),t(P,{value:"three"},{default:s(()=>[t(j,null,{default:s(()=>[t(I,null,{default:s(()=>[t(i,{cols:"12",class:"pa-0 my-2"},{default:s(()=>[l("div",ua,[l("div",ia,[l("div",da,[e[46]||(e[46]=l("span",null,"وزن طلا (گرم)",-1)),t(g,{modelValue:x.value.goldWeight,"onUpdate:modelValue":e[5]||(e[5]=o=>x.value.goldWeight=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",class:"transition-field",rules:J,onInput:rl},null,8,["modelValue"])]),l("div",ra,[e[47]||(e[47]=l("span",null,"کد ملی گیرنده",-1)),t(g,{modelValue:x.value.nationalCode,"onUpdate:modelValue":e[6]||(e[6]=o=>x.value.nationalCode=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",class:"transition-field",rules:De},null,8,["modelValue"])])]),O.value?(U(),ke("div",va,[t(Ke,{length:4,modelValue:Ie.value,"onUpdate:modelValue":e[7]||(e[7]=o=>Ie.value=o),type:"number",variant:"outlined",class:"otp-input",inputmode:"numeric",autocomplete:"one-time-code",onInput:a.handleOTPInput},null,8,["modelValue","onInput"]),l("p",ca," زمان باقی مانده : "+u(ee.value)+" ثانیه ",1)])):H("",!0),l("div",pa,[O.value?(U(),N(y,{key:1,color:"#af8b4a",class:"px-8",onClick:_l,disabled:!qe.value,loading:ge.value},{default:s(()=>e[49]||(e[49]=[W("تایید")])),_:1},8,["disabled","loading"])):(U(),N(y,{key:0,color:"#af8b4a",class:"px-8",onClick:bl,disabled:!qe.value,loading:be.value},{default:s(()=>e[48]||(e[48]=[W("ثبت انتقال")])),_:1},8,["disabled","loading"]))])])]),_:1})]),_:1})]),_:1})]),_:1}),t(P,{value:"four"},{default:s(()=>[t(j,null,{default:s(()=>[t(I,null,{default:s(()=>[t(i,{cols:"12",class:"pa-0 my-2"},{default:s(()=>[l("div",ma,[t(I,null,{default:s(()=>[t(i,{cols:"12",md:"4",class:"my-6"},{default:s(()=>[t(g,{modelValue:p.value.goldWeight,"onUpdate:modelValue":e[8]||(e[8]=o=>p.value.goldWeight=o),label:"وزن طلا (گرم)",variant:"outlined",color:"rgba(135, 104, 36, 1)",class:"transition-field",rules:J,onInput:vl},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",md:"4",class:"my-6"},{default:s(()=>[t(Se,{modelValue:p.value.branchId,"onUpdate:modelValue":[e[9]||(e[9]=o=>p.value.branchId=o),hl],items:Ne.value,label:"شعبه ها",variant:"outlined",rules:ue,"item-title":"name","item-value":"id"},null,8,["modelValue","items"])]),_:1}),t(i,{cols:"12",md:"4",class:"my-6"},{default:s(()=>[p.value.branchId?(U(),N(Se,{key:0,modelValue:p.value.sellerId,"onUpdate:modelValue":e[10]||(e[10]=o=>p.value.sellerId=o),items:Be.value,label:"فروشنده",variant:"outlined",rules:ue,"item-title":"lastName","item-value":"id"},null,8,["modelValue","items"])):H("",!0)]),_:1})]),_:1}),M.value?(U(),ke("div",fa,[e[50]||(e[50]=l("p",{class:"transfer-otp"},"کد احراز برای فروشنده ارسال شد",-1)),t(Ke,{length:4,modelValue:Ve.value,"onUpdate:modelValue":e[11]||(e[11]=o=>Ve.value=o),type:"number",variant:"outlined",class:"otp-input",inputmode:"numeric",autocomplete:"one-time-code",onInput:a.handleOTPInput},null,8,["modelValue","onInput"]),l("p",ga," زمان باقی مانده : "+u(le.value)+" ثانیه ",1)])):H("",!0),l("div",ya,[M.value?(U(),N(y,{key:1,color:"#af8b4a",class:"px-8",onClick:Cl,loading:ye.value},{default:s(()=>e[52]||(e[52]=[W("تایید")])),_:1},8,["loading"])):(U(),N(y,{key:0,color:"#af8b4a",class:"px-8",onClick:Tl,loading:we.value,disabled:!Vl.value},{default:s(()=>e[51]||(e[51]=[W("ثبت استفاده")])),_:1},8,["loading","disabled"]))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[56]||(e[56]=l("h3",{class:"title mt-10"},"تاریخچه تراکنش ها",-1)),l("div",ba,[l("div",xa,[t(k,{modelValue:Z.value,"onUpdate:modelValue":e[13]||(e[13]=o=>Z.value=o),"bg-color":"white",class:"w-100"},{default:s(()=>[t(T,{value:"one"},{default:s(()=>e[53]||(e[53]=[W("خرید")])),_:1}),t(T,{value:"two"},{default:s(()=>e[54]||(e[54]=[W("فروش")])),_:1})]),_:1},8,["modelValue"]),l("div",_a,[t(Sl,{label:"وضعیت پرداخت",items:al.value,"item-title":"text","item-value":"value",density:"comfortable",variant:"solo",class:"transaction-filter w-100","onUpdate:modelValue":gl},null,8,["items"])])]),t(He,{modelValue:Z.value,"onUpdate:modelValue":e[14]||(e[14]=o=>Z.value=o)},{default:s(()=>[t(P,{value:"one",class:"transaction-box"},{default:s(()=>[e[55]||(e[55]=l("div",{class:"d-flex justify-end"},null,-1)),t(Qe,{headers:ze.value,items:Me.value,loading:D.value,class:"transaction-table"},{"item.status":s(({item:o})=>[l("div",wa,[t(ie,{text:o.status=="completed"?"موفق":o.status=="pending"?"نامشخص":"ناموفق",color:o.status=="completed"?"green":o.status=="pending"?"#666666":"red",size:"small"},null,8,["text","color"])])]),"item.goldPrice":s(({item:o})=>[l("p",null,u(C(o.goldPrice)),1)]),"item.totalPrice":s(({item:o})=>[l("p",null,u(C(o.totalPrice)),1)]),"item.tradeType":s(({item:o})=>[l("div",Ia,[t(ie,{text:o.tradeType==0?"آنلاین":o.tradeType==1?"تلفنی":o.tradeType==2?"حضوری":"حواله",color:"#78909C",size:"small"},null,8,["text"])])]),_:1},8,["headers","items","loading"])]),_:1}),t(P,{value:"two",class:"transaction-box"},{default:s(()=>[t(Qe,{headers:ze.value,items:Oe.value,loading:D.value,class:"transaction-table"},{"item.status":s(({item:o})=>[l("div",Va,[t(ie,{text:o.status=="completed"?"موفق":o.status=="pending"?"نامشخص":"ناموفق",color:o.status=="completed"?"green":o.status=="pending"?"#666666":"red",size:"small"},null,8,["text","color"])])]),"item.goldPrice":s(({item:o})=>[l("p",null,u(C(o.goldPrice)),1)]),"item.totalPrice":s(({item:o})=>[l("p",null,u(C(o.totalPrice)),1)]),"item.tradeType":s(({item:o})=>[l("div",Wa,[t(ie,{text:o.tradeType==0?"آنلاین":o.tradeType==1?"تلفنی":o.tradeType==2?"حضوری":"حواله",color:"#78909C",size:"small"},null,8,["text"])])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),t(ve,{"max-width":"500",modelValue:B.value,"onUpdate:modelValue":e[18]||(e[18]=o=>B.value=o),class:"trade-modal"},{default:s(()=>[t(re,{class:"trade-modal"},{default:s(()=>[t(de,{class:"ma-4 text-center",color:"error",text:"مبلغ انتخابی شما طبق فاکتور زیر اصلاح شد",variant:"tonal"}),l("div",ha,[e[61]||(e[61]=l("h3",null,"فاکتور خرید",-1)),l("div",Ta,[e[57]||(e[57]=l("span",{class:"pe-6"},"موجودی کیف پول",-1)),l("span",null,u(L.value.balance)+" تومان",1)]),l("div",Pa,[e[58]||(e[58]=l("p",{class:"pe-6"},"مقدار طلا",-1)),l("p",null,u(v.value.goldWeight)+" گرم",1)]),l("div",Ca,[e[59]||(e[59]=l("p",{class:"pe-6"},"مبلغ",-1)),l("p",null,u(v.value.goldprice)+" تومان",1)]),l("div",Sa,[e[60]||(e[60]=l("span",{class:"fee"},"کارمزد 0 درصد",-1)),l("div",ka,[l("span",null,u(z.value),1),t(Xe)])])]),l("div",Ua,[t(Se,{modelValue:L.value.cartId,"onUpdate:modelValue":e[15]||(e[15]=o=>L.value.cartId=o),loading:_e.value,label:"انتخاب کارت",items:$e.value,variant:"outlined","item-title":"cardNumber","item-value":"id",rules:[o=>!!o||"لطفا کارت خود را انتخاب کنید"]},null,8,["modelValue","loading","items","rules"])]),l("div",La,[t(y,{text:"پرداخت مستقیم",class:"pay-btn",color:"#9D7E3B",disabled:!L.value.cartId,onClick:e[16]||(e[16]=o=>Ae("direct"))},null,8,["disabled"]),t(y,{text:"پرداخت از کیف پول",class:"pay-btn",color:"#9D7E3B",variant:"outlined",onClick:e[17]||(e[17]=o=>Ae("wallet"))})])]),_:1})]),_:1},8,["modelValue"]),t(ve,{"max-width":"500",modelValue:$.value,"onUpdate:modelValue":e[20]||(e[20]=o=>$.value=o),class:"trade-modal"},{default:s(()=>[t(re,{class:"trade-modal"},{default:s(()=>[t(de,{class:"ma-4 text-center",color:"error",text:"مبلغ انتخابی شما طبق فاکتور زیر اصلاح شد",variant:"tonal"}),l("div",Ga,[e[66]||(e[66]=l("h3",null,"فاکتور فروش",-1)),l("div",ja,[e[62]||(e[62]=l("span",{class:"pe-6"},"موجودی کیف پول",-1)),l("span",null,u(F.value.goldWeight)+" گرم",1)]),l("div",Na,[e[63]||(e[63]=l("p",{class:"pe-6"},"مقدار طلا",-1)),l("p",null,u(r.value.goldWeight)+" گرم",1)]),l("div",Ba,[e[64]||(e[64]=l("p",{class:"pe-6"},"مبلغ",-1)),l("p",null,u(r.value.goldPrice)+" تومان",1)]),l("div",$a,[e[65]||(e[65]=l("span",{class:"fee"},"کارمزد 1 درصد",-1)),l("div",Oa,[l("span",null,u(z.value),1),t(Xe)])])]),l("div",Ma,[t(y,{text:"تایید فروش",class:"pay-btn",color:"#9D7E3B",onClick:e[19]||(e[19]=o=>fl())})])]),_:1})]),_:1},8,["modelValue"]),t(ve,{"max-width":"500",modelValue:Q.value,"onUpdate:modelValue":e[21]||(e[21]=o=>Q.value=o),class:"trade-modal"},{default:s(()=>[t(re,{class:"trade-modal"},{default:s(()=>[l("div",za,[e[80]||(e[80]=l("h3",{class:"my-4"},"فاکتور انتقال",-1)),t(I,null,{default:s(()=>[t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Da,[e[67]||(e[67]=l("p",null,"گرم انتقال :",-1)),l("p",null,u(c.value.goldWeight),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Fa,[e[68]||(e[68]=l("p",null,"شماره فاکتور :",-1)),l("p",null,u(c.value.invoiceId),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Ra,[e[69]||(e[69]=l("p",null,"تاریخ انتقال :",-1)),l("p",null,u(c.value.date),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Ea,[e[70]||(e[70]=l("p",null,"زمان انتقال :",-1)),l("p",null,u(c.value.time),1)])]),_:1}),t(V),t(i,{cols:"12"},{default:s(()=>e[71]||(e[71]=[l("div",{class:"d-flex justify-start"},[l("p",{class:"font-weight-bold"},"اطلاعات انتقال دهنده")],-1)])),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Aa,[e[72]||(e[72]=l("p",null,"نام :",-1)),l("p",null,u(c.value.sender.firstName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",qa,[e[73]||(e[73]=l("p",null,"نام خانوادگی :",-1)),l("p",null,u(c.value.sender.lastName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Ja,[e[74]||(e[74]=l("p",null,"کد ملی :",-1)),l("p",null,u(c.value.sender.nationalCode),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Ka,[e[75]||(e[75]=l("p",null,"موجودی :",-1)),l("p",null,u(c.value.sender.goldWeight)+" گرم",1)])]),_:1}),t(V),t(i,{cols:"12"},{default:s(()=>e[76]||(e[76]=[l("div",{class:"d-flex justify-start"},[l("p",{class:"font-weight-bold"},"اطلاعات گیرنده")],-1)])),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Ha,[e[77]||(e[77]=l("p",null,"نام :",-1)),l("p",null,u(c.value.reciever.firstName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Qa,[e[78]||(e[78]=l("p",null,"نام خانوادگی :",-1)),l("p",null,u(c.value.reciever.lastName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Xa,[e[79]||(e[79]=l("p",null,"کد ملی :",-1)),l("p",null,u(c.value.reciever.nationalCode),1)])]),_:1})]),_:1})]),l("div",Ya,[t(y,{text:"تایید انتقال",class:"pay-btn",color:"#9D7E3B",block:"",loading:fe.value,onClick:xl},null,8,["loading"])])]),_:1})]),_:1},8,["modelValue"]),t(ve,{"max-width":"500",modelValue:ae.value,"onUpdate:modelValue":e[22]||(e[22]=o=>ae.value=o),class:"trade-modal"},{default:s(()=>[t(re,{class:"trade-modal"},{default:s(()=>[l("div",Za,[e[94]||(e[94]=l("h3",{class:"my-4"},"فاکتور استفاده از طلا",-1)),t(I,null,{default:s(()=>[t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",et,[e[81]||(e[81]=l("p",null,"گرم انتقال :",-1)),l("p",null,u(_.value.goldWeight),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",lt,[e[82]||(e[82]=l("p",null,"شماره فاکتور :",-1)),l("p",null,u(_.value.invoiceId),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",at,[e[83]||(e[83]=l("p",null,"تاریخ ایجاد :",-1)),l("p",null,u(_.value.date),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",tt,[e[84]||(e[84]=l("p",null,"زمان ایجاد :",-1)),l("p",null,u(_.value.time),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",st,[e[85]||(e[85]=l("p",null,"قیمت لحظه ای :",-1)),l("p",null,u(C(_.value.goldPrice))+" تومان",1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",ot,[e[86]||(e[86]=l("p",null,"قیمت کل :",-1)),l("p",null,u(C(_.value.totalPrice))+" تومان",1)])]),_:1}),t(V),t(i,{cols:"12"},{default:s(()=>e[87]||(e[87]=[l("div",{class:"d-flex justify-start"},[l("p",{class:"font-weight-bold"},"اطلاعات کاربر")],-1)])),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",nt,[e[88]||(e[88]=l("p",null,"نام :",-1)),l("p",null,u(_.value.user.firstName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",ut,[e[89]||(e[89]=l("p",null,"نام خانوادگی :",-1)),l("p",null,u(_.value.user.lastName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",it,[e[90]||(e[90]=l("p",null,"کد ملی :",-1)),l("p",null,u(_.value.user.nationalCode),1)])]),_:1}),t(V),t(i,{cols:"12"},{default:s(()=>e[91]||(e[91]=[l("div",{class:"d-flex justify-start"},[l("p",{class:"font-weight-bold"},"اطلاعات فروشنده")],-1)])),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",dt,[e[92]||(e[92]=l("p",null,"نام :",-1)),l("p",null,u(_.value.seller.firstName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",rt,[e[93]||(e[93]=l("p",null,"نام خانوادگی :",-1)),l("p",null,u(_.value.seller.lastName),1)])]),_:1})]),_:1})]),l("div",vt,[t(y,{text:"تایید استفاده",class:"pay-btn",color:"#9D7E3B",block:"",loading:xe.value,onClick:Pl},null,8,["loading"])])]),_:1})]),_:1},8,["modelValue"]),d.value?(U(),N(de,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:s(()=>[W(u(m.value),1)]),_:1})):H("",!0),G.value?(U(),N(de,{key:1,color:"success",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:s(()=>[W(u(Y.value),1)]),_:1})):H("",!0)])}}},xt=Ul(ct,[["__scopeId","data-v-527e6153"]]);export{xt as default};
