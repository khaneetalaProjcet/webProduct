import{P as nl}from"./price-BsCk1i1e.js";import{T as I}from"./trade-CvO0Ul4Y.js";import{T as Ne}from"./TimerIcon-BtxcVXTa.js";import{_ as il,r as n,q as fe,e as ul,j as y,w as Ue,f as rl,c as Be,m as a,l as s,g as Z,x as ye,y as dl,A as cl,k as m,o as G,a as t,z as V,p as i,C as ee,n as $e}from"./index-C1o5iz0g.js";import{x as Ge}from"./persian-tools.esm-CBI2Czng.js";const vl={class:"goldbox-section buy me-2"},pl={class:"live-price-box"},ml={class:"fade-badge"},gl={class:"d-flex justify-center align-center order-2"},fl={class:"price-in-word"},yl={class:"goldbox-section"},bl={class:"wallet-box"},_l={class:"d-flex justify-space-between py-2 px-4 my-1"},xl={class:"mb-0"},wl={class:"d-flex justify-space-between py-2 px-4 my-1"},Wl={class:"mb-0"},hl={class:"my-2"},Vl={class:"goldbox-section sell me-2"},Pl={class:"live-price-box"},Tl={class:"fade-badge"},Il={class:"d-flex justify-center align-center order-2"},Cl={class:"price-in-word"},kl={class:"goldbox-section"},Sl={class:"wallet-box sell"},jl={class:"d-flex justify-space-between py-2 px-4 my-1"},Ll={class:"mb-0"},Nl={class:"d-flex justify-space-between py-2 px-4 my-1"},Ul={class:"mb-0"},Bl={class:"my-2"},$l={class:"d-flex flex-column goldbox-section transfer"},Gl={class:"d-flex flex-column flex-md-row justify-center w-100"},Ml={class:"w-100 me-md-4"},Ol={class:"w-100 ms-md-4"},zl={key:0,class:"d-flex flex-column"},Fl={class:"transfer-otp"},Rl={class:"d-flex justify-end w-100 mt-3"},Al={class:"trade-history pa-md-3"},Dl={class:"d-flex flex-column flex-md-row justify-space-between"},El={class:"d-flex justify-start justify-md-end w-100 mt-3"},ql={class:""},Jl={class:""},Kl={class:""},Hl={class:""},Ql={class:"buyModal-content py-5"},Xl={class:"wallet-badge my-2"},Yl={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},Zl={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},et={class:"d-flex justify-space-evenly align-center w-100 my-2"},lt={class:"d-flex"},tt={class:"my-4"},at={class:"d-flex justify-space-around mt-2 mb-7"},st={class:"buyModal-content py-5"},ot={class:"wallet-badge my-2"},nt={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},it={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},ut={class:"d-flex justify-space-evenly align-center w-100 my-2"},rt={class:"d-flex"},dt={class:"d-flex justify-space-around mt-2 mb-7"},ct={class:"transferModal-content py-5"},vt={class:"d-flex align-center"},pt={class:"d-flex align-center"},mt={class:"d-flex align-center"},gt={class:"d-flex align-center"},ft={class:"d-flex align-center"},yt={class:"d-flex align-center"},bt={class:"d-flex align-center"},_t={class:"d-flex align-center"},xt={class:"d-flex align-center"},wt={class:"d-flex align-center"},Wt={class:"d-flex align-center"},ht={class:"d-flex justify-space-around mt-2 mb-7"},Vt={__name:"GoldBoxView",setup(Pt){const be=dl(),D=n(!1),le=n(""),E=n(null),M=n(!1),O=n(!1),_e=n(!1),te=n(!1),ae=n(!1),se=n(!1),oe=n(!1),b=n(""),ne=n(""),d=n(!1),z=n(!1),S=n(!1),j=n(!1),P=n(!1),q=n(null),L=n(!1),J=n(120),f=n({goldWeight:"",nationalCode:""}),ie=n(""),xe=n([]),_=n({sellPrice:"",buyPrice:"",change:""}),N=n(30),U=n(!1),we=n(),We=n(),he=n([{title:"تاریخ",key:"date"},{title:"روش ثبت",key:"tradeType"},{title:"زمان",key:"time"},{title:"وزن طلا(گرم)",key:"goldWeight"},{title:"قیمت نهایی",key:"totalPrice"},{title:"قیمت طلا در لحظه",key:"goldPrice"},{title:"وضعیت",key:"status"}]),Me=n([{text:"همه",value:""},{text:"موفق",value:"success"},{text:"ناموفق",value:"failed"},{text:"نامشخص",value:"pending"}]);let K=n(null);const ue=n({invoiceId:"",paymentUrl:""});let H=null;const v=n({id:"",time:"",date:"",goldWeight:"",invoiceId:"",reciever:{firstName:"",lastName:"",nationalCode:""},sender:{firstName:"",lastName:"",nationalCode:"",goldWeight:""}}),c=n({goldprice:"",goldWeight:""}),r=n({goldPrice:"",goldWeight:""}),C=n({invoiceId:"",isFromWallet:"",balance:0,cartId:null}),B=n({invoiceId:"",isFromWallet:"",balance:0,goldWeight:0}),F=n({type:"",totalPrice:"",goldPrice:"",goldWeight:""}),R=n({type:"",totalPrice:"",goldPrice:"",goldWeight:""}),re=n({status:""}),de=n({}),ce=[l=>!!l||"مقدار ورودی نمی‌تواند خالی باشد",l=>/^\d+(\.\d{1,3})?$/.test(l)||"فقط عدد مجاز است و حداکثر 3 رقم اعشار"],Ve=[l=>!!l||"کد ملی الزامی است",l=>/^\d{10}$/.test(l)||"کد ملی باید ۱۰ رقم باشد",l=>{if(!/^\d{10}$/.test(l))return!0;const e=+l[9],u=l.split("").slice(0,9).reduce((w,T,W)=>w+ +T*(10-W),0)%11;return u<2&&e===u||u>=2&&e+u===11||"کد ملی نامعتبر است"}],k=l=>l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),Oe=fe(()=>{if(c.value.goldprice&&c.value.goldprice!=""){const l=c.value.goldprice.toString().replace(/,/g,""),e=parseInt(l,10);return e<1?"کمتر از یک تومان":Ge(Math.floor(e))+" تومان"}return""}),ze=fe(()=>{if(r.value.goldPrice&&r.value.goldPrice!=""){const l=r.value.goldPrice.toString().replace(/,/g,""),e=parseInt(l,10);return e<1?"کمتر از یک تومان":Ge(Math.floor(e))+" تومان"}return""}),Pe=async()=>{try{_e.value=!0;const l=await nl.GoldPrice();return _.value.buyPrice=l.buyPrice,_.value.sellPrice=l.sellPrice,_.value.change=l.change,l}catch(l){l.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=l.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{_e.value=!1}},Fe=async()=>{try{oe.value=!0;const l=await cl.GetCarts();return xe.value=l.data.bankAccounts,l}catch(l){l.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=l.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{oe.value=!1}},Q=l=>l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),Te=l=>l.replace(/,/g,""),Re=l=>{const e=l.target.selectionStart,u=c.value.goldprice.length,w=Te(c.value.goldprice).replace(/[^0-9]/g,""),T=parseInt(w||0);let p=(T/_.value.buyPrice).toFixed(5).split(""),g=`${p[0]}${p[1]}${p[2]}${p[3]}${p[4]}`;console.log(g),c.value.goldWeight=g;const x=Q(T);c.value.goldprice=x,$e(()=>{const h=x.length-u;l.target.setSelectionRange(e+h,e+h)})},Ae=()=>{c.value.goldWeight=c.value.goldWeight.replace(/[^0-9.]/g,"");const l=c.value.goldWeight.split(".");l.length>1&&(c.value.goldWeight=l[0]+"."+l.slice(1).join("")),l.length>1&&l[1].length>2&&(c.value.goldWeight=l[0]+"."+l[1].slice(0,3)),c.value.goldprice=parseInt(c.value.goldWeight*_.value.buyPrice);const e=parseInt(c.value.goldWeight*_.value.buyPrice);c.value.goldprice=Q(e)},De=l=>{const e=l.target.selectionStart,u=r.value.goldPrice.length,w=Te(r.value.goldPrice).replace(/[^0-9]/g,""),T=parseInt(w||0);let W=(T/_.value.buyPrice).toFixed(5);console.log("ddd",W);let p=W.split(""),g=`${p[0]}${p[1]}${p[2]}${p[3]}${p[4]}`;console.log("ddd222",g),r.value.goldWeight=g;const x=Q(T);r.value.goldPrice=x,$e(()=>{const h=x.length-u;l.target.setSelectionRange(e+h,e+h)})},Ee=()=>{r.value.goldWeight=r.value.goldWeight.replace(/[^0-9.]/g,"");const l=r.value.goldWeight.split(".");l.length>1&&(r.value.goldWeight=l[0]+"."+l.slice(1).join("")),l.length>1&&l[1].length>2&&(r.value.goldWeight=l[0]+"."+l[1].slice(0,3)),r.value.goldPrice=parseInt(r.value.goldWeight*_.value.sellPrice);const e=parseInt(r.value.goldWeight*_.value.sellPrice);r.value.goldPrice=Q(e)},qe=()=>{f.value.goldWeight=f.value.goldWeight.replace(/[^0-9.]/g,"");const l=f.value.goldWeight.split(".");l.length>1&&(l[1]=l[1].slice(0,3),f.value.goldWeight=l[0]+"."+l[1])},Ie=()=>{P.value=!P.value},Je=[l=>!!l||"مقدار ورودی نمی‌تواند خالی باشد",l=>/^\d+(\.\d{1,3})?$/.test(l)||"فقط عدد مجاز است و حداکثر 4 رقم اعشار"],Ke=async()=>{try{M.value=!0,F.value.type="buy",F.value.totalPrice=c.value.goldprice,F.value.goldWeight=c.value.goldWeight,F.value.goldPrice=_.value.buyPrice;const l=await I.createInvoice(F.value);return C.value.invoiceId=l.transactionId,C.value.balance=l.wallet.balance,S.value=!0,l}catch(l){l.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=l.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{M.value=!1}},Ce=async l=>{try{M.value=!0,l=="wallet"?C.value.isFromWallet=!0:C.value.isFromWallet=!1;const e=await I.complateTransaction(C.value);return e.isFromWallet==!0?(S.value=!1,y.replace("/")):(ue.value.paymentUrl=e.paymentUrl,ue.value.invoiceId=e.invoiceId,window.location.href=ue.value.paymentUrl),e}catch(e){e.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=e.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{M.value=!1,pe()}},He=async()=>{try{O.value=!0,R.value.type="sell",R.value.totalPrice=r.value.goldPrice,R.value.goldWeight=r.value.goldWeight,R.value.goldPrice=_.value.sellPrice;const l=await I.createSellInvoice(R.value);return B.value.invoiceId=l.transactionId,B.value.balance=l.wallet.balance,B.value.goldWeight=l.wallet.goldWeight,r.value.goldPrice="",r.value.goldPrice="",j.value=!0,l}catch(l){l.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=l.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{O.value=!1}},Qe=async()=>{try{O.value=!0,B.value.fee=1;const l=await I.complateSellTransaction(B.value);return j.value=!1,ne.value="طلای شما با موفقیت به فروش رسید",z.value=!0,setTimeout(()=>{z.value=!1},5e3),l}catch(l){l.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=l.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{O.value=!1,ve()}},Xe=l=>{re.value.status=l.value,ve(),pe()},ve=async()=>{try{U.value=!0;const l=await I.GoldBoxSellTransactions(re.value);return we.value=l,l}catch(l){l.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=l.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{U.value=!1}},pe=async()=>{try{U.value=!0;const l=await I.GoldBoxBuyTransactions(re.value);return We.value=l,l}catch(l){l.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=l.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{U.value=!1}},Ye=async l=>{try{const e=await I.VerifyTransaction(l);return de.value=e,e}catch(e){e.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=e.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}},ke=fe(()=>ce.every(l=>l(f.value.goldWeight)===!0)&&Ve.every(l=>l(f.value.nationalCode)===!0)),Ze=async()=>{try{se.value=!0;const l=await I.CreateTransfer(f.value);return D.value=!0,v.value=l.data,v.value.id=l.data.id,v.value.invoiceId=l.data.invoiceId,v.value.date=l.data.date,v.value.time=l.data.time,v.value.sender.firstName=l.data.sender.firstName,v.value.sender.lastName=l.data.sender.lastName,v.value.sender.nationalCode=l.data.sender.nationalCode,v.value.sender.goldWeight=l.data.sender.wallet.goldWeight,v.value.reciever.firstName=l.data.reciever.firstName,v.value.reciever.lastName=l.data.reciever.lastName,v.value.reciever.nationalCode=l.data.reciever.nationalCode,l}catch(l){l.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=l.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{se.value=!1}},el=async()=>{try{te.value=!0;const l=await I.TransferOtp(v.value.id);return D.value=!1,L.value=!0,tl(),l}catch(l){l.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=l.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{te.value=!1}},ll=async()=>{try{ae.value=!0;const l=await I.VerifyTransferOtp(ie.value,v.value.id);return L.value=!1,f.value.nationalCode=null,f.value.goldWeight=null,ne.value=l.msg,z.value=!0,setTimeout(()=>{z.value=!1},5e3),l}catch(l){l.response.status==401&&(localStorage.clear(),y.replace("/Login")),b.value=l.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{ae.value=!1}},tl=()=>{J.value=120,H&&clearInterval(H),H=setInterval(()=>{J.value--,J.value<=0&&(clearInterval(H),L.value&&(L.value=!1,f.value.nationalCode=null,f.value.goldWeight=null,b.value="زمان تایید انتقال به پایان رسیده است",d.value=!0,setTimeout(()=>{d.value=!1},5e3)))},1e3)};ul(()=>{Pe(),pe(),ve(),Fe(),setInterval(()=>{Pe()},3e4),le.value=JSON.parse(localStorage.getItem("user"));const l=n({authority:be.query.Authority,status:be.query.Status});l.value.authority&&l.value.status&&(Ye(l.value),l.value.status==="OK"?y.push({name:"success",state:de.value}):y.push({name:"failed",state:de.value}))}),Ue(S,l=>{l?(N.value=30,Se()):A()}),Ue(j,l=>{l?(N.value=30,Se()):A()});const Se=()=>{A(),K=setInterval(()=>{N.value>0?N.value--:(A(),S.value=!1,j.value=!1)},1e3)},A=()=>{K&&(clearInterval(K),K=null)};return rl(()=>{A()}),(l,e)=>{const u=m("v-col"),w=m("v-tab"),T=m("v-tabs"),W=m("v-row"),p=m("v-text-field"),g=m("v-btn"),x=m("v-divider"),$=m("v-container"),h=m("v-tabs-window-item"),al=m("v-otp-input"),je=m("v-tabs-window"),sl=m("v-combobox"),X=m("v-chip"),Le=m("v-data-table"),Y=m("v-alert"),ol=m("v-select"),me=m("v-card"),ge=m("v-dialog");return G(),Be("div",null,[a($,{class:"px-0",fluid:""},{default:s(()=>[a(W,{class:"my-1"},{default:s(()=>[a(u,{cols:"12"},{default:s(()=>e[18]||(e[18]=[t("div",{class:"d-flex flex-column align-center"},[t("h3",{class:"title"},"خرید و فروش طلا")],-1)])),_:1}),a(u,{cols:"12"},{default:s(()=>[a(T,{modelValue:E.value,"onUpdate:modelValue":e[0]||(e[0]=o=>E.value=o),"bg-color":"white",class:"tab-header"},{default:s(()=>[a(w,{value:"one"},{default:s(()=>e[19]||(e[19]=[V("خرید")])),_:1}),a(w,{value:"two"},{default:s(()=>e[20]||(e[20]=[V("فروش")])),_:1}),a(w,{value:"three"},{default:s(()=>e[21]||(e[21]=[V("انتقال")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(je,{modelValue:E.value,"onUpdate:modelValue":e[8]||(e[8]=o=>E.value=o),class:"my-1"},{default:s(()=>[a(h,{value:"one"},{default:s(()=>[a($,null,{default:s(()=>[a(W,null,{default:s(()=>[a(u,{cols:"12",md:"7",class:"pa-0 my-2"},{default:s(()=>[t("div",vl,[t("div",pl,[e[22]||(e[22]=t("span",{class:"live-tag"},"لحظه ای",-1)),e[23]||(e[23]=t("p",null,"قیمت طلای 18 عیار:",-1)),t("p",ml,i(k(_.value.buyPrice))+" تومان ",1)]),t("div",{class:ee(["my-1",{"order-3":P.value,"order-1":!P.value}])},[e[24]||(e[24]=t("span",null,"وزن طلا (گرم)",-1)),a(p,{modelValue:c.value.goldWeight,"onUpdate:modelValue":e[1]||(e[1]=o=>c.value.goldWeight=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:Ae,rules:Je,class:"transition-field"},null,8,["modelValue"])],2),t("div",gl,[a(g,{icon:"mdi-swap-horizontal",variant:"text",class:"change-btn",onClick:Ie})]),t("div",{class:ee(["my-1",{"order-1":P.value,"order-3":!P.value}])},[e[25]||(e[25]=t("span",null,"مبلغ (تومان)",-1)),a(p,{modelValue:c.value.goldprice,"onUpdate:modelValue":e[2]||(e[2]=o=>c.value.goldprice=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:Re,class:"transition-field"},null,8,["modelValue"]),t("p",fl,i(Oe.value),1)],2)])]),_:1}),a(u,{cols:"12",md:"5",class:"pa-0 my-2"},{default:s(()=>[t("div",yl,[t("div",bl,[e[26]||(e[26]=t("p",null,"موجودی کیف پول :",-1)),t("p",null,i(k(le.value.balance))+" تومان",1)]),t("div",_l,[e[27]||(e[27]=t("p",{class:"mb-0"},"گرم طلا :",-1)),t("p",xl,i(c.value.goldWeight)+" گرم",1)]),a(x),e[30]||(e[30]=t("div",{class:"d-flex justify-space-between py-2 px-4 my-1"},[t("p",{class:"mb-0"},"کارمزد خرید :"),t("p",{class:"mb-0"},"0٪")],-1)),a(x),t("div",wl,[e[28]||(e[28]=t("p",{class:"mb-0"},"مبلغ قابل پرداخت :",-1)),t("p",Wl,i(k(c.value.goldprice))+" تومان ",1)]),t("div",hl,[a(g,{color:"#00603a",loading:M.value,onClick:Ke,block:""},{default:s(()=>e[29]||(e[29]=[V("خرید")])),_:1},8,["loading"])])])]),_:1})]),_:1})]),_:1})]),_:1}),a(h,{value:"two"},{default:s(()=>[a($,null,{default:s(()=>[a(W,null,{default:s(()=>[a(u,{cols:"12",md:"7",class:"pa-0 my-2"},{default:s(()=>[t("div",Vl,[t("div",Pl,[e[31]||(e[31]=t("span",{class:"live-tag"},"لحظه ای",-1)),e[32]||(e[32]=t("p",null,"قیمت طلای 18 عیار:",-1)),t("p",Tl,i(k(_.value.buyPrice))+" تومان ",1)]),t("div",{class:ee(["my-1",{"order-3":P.value,"order-1":!P.value}])},[e[33]||(e[33]=t("span",null,"وزن طلا (گرم)",-1)),a(p,{modelValue:r.value.goldWeight,"onUpdate:modelValue":e[3]||(e[3]=o=>r.value.goldWeight=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:Ee,rules:ce},null,8,["modelValue"])],2),t("div",Il,[a(g,{icon:"mdi-swap-horizontal",variant:"text",class:"change-btn",onClick:Ie})]),t("div",{class:ee(["my-1",{"order-1":P.value,"order-3":!P.value}])},[e[34]||(e[34]=t("span",null,"مبلغ (تومان)",-1)),a(p,{modelValue:r.value.goldPrice,"onUpdate:modelValue":e[4]||(e[4]=o=>r.value.goldPrice=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:De},null,8,["modelValue"]),t("p",Cl,i(ze.value),1)],2)])]),_:1}),a(u,{cols:"12",md:"5",class:"pa-0 my-2"},{default:s(()=>[t("div",kl,[t("div",Sl,[e[35]||(e[35]=t("p",null,"موجودی صندوق طلا :",-1)),t("p",null,i(le.value.goldWeight)+" گرم",1)]),t("div",jl,[e[36]||(e[36]=t("p",{class:"mb-0"},"گرم طلا :",-1)),t("p",Ll,i(r.value.goldWeight)+" گرم",1)]),a(x),e[39]||(e[39]=t("div",{class:"d-flex justify-space-between py-2 px-4 my-1"},[t("p",{class:"mb-0"},"کارمزد فروش :"),t("p",{class:"mb-0"},"1٪")],-1)),a(x),t("div",Nl,[e[37]||(e[37]=t("p",{class:"mb-0"},"مبلغ قابل پرداخت :",-1)),t("p",Ul,i(k(r.value.goldPrice))+" تومان ",1)]),t("div",Bl,[a(g,{color:"#930606",loading:O.value,onClick:He,block:""},{default:s(()=>e[38]||(e[38]=[V("فروش")])),_:1},8,["loading"])])])]),_:1})]),_:1})]),_:1})]),_:1}),a(h,{value:"three"},{default:s(()=>[a($,null,{default:s(()=>[a(W,null,{default:s(()=>[a(u,{cols:"12",class:"pa-0 my-2"},{default:s(()=>[t("div",$l,[t("div",Gl,[t("div",Ml,[e[40]||(e[40]=t("span",null,"وزن طلا (گرم)",-1)),a(p,{modelValue:f.value.goldWeight,"onUpdate:modelValue":e[5]||(e[5]=o=>f.value.goldWeight=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",class:"transition-field",rules:ce,onInput:qe},null,8,["modelValue"])]),t("div",Ol,[e[41]||(e[41]=t("span",null,"کد ملی گیرنده",-1)),a(p,{modelValue:f.value.nationalCode,"onUpdate:modelValue":e[6]||(e[6]=o=>f.value.nationalCode=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",class:"transition-field",rules:Ve},null,8,["modelValue"])])]),L.value?(G(),Be("div",zl,[a(al,{length:4,modelValue:ie.value,"onUpdate:modelValue":e[7]||(e[7]=o=>ie.value=o),type:"number",variant:"outlined",class:"otp-input",inputmode:"numeric",autocomplete:"one-time-code",onInput:l.handleOTPInput},null,8,["modelValue","onInput"]),t("p",Fl," زمان باقی مانده : "+i(J.value)+" ثانیه ",1)])):ye("",!0),t("div",Rl,[L.value?(G(),Z(g,{key:1,color:"#af8b4a",class:"px-8",onClick:ll,disabled:!ke.value,loading:ae.value},{default:s(()=>e[43]||(e[43]=[V("تایید")])),_:1},8,["disabled","loading"])):(G(),Z(g,{key:0,color:"#af8b4a",class:"px-8",onClick:Ze,disabled:!ke.value,loading:se.value},{default:s(()=>e[42]||(e[42]=[V("ثبت انتقال")])),_:1},8,["disabled","loading"]))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[47]||(e[47]=t("h3",{class:"title mt-10"},"تاریخچه تراکنش ها",-1)),t("div",Al,[t("div",Dl,[a(T,{modelValue:q.value,"onUpdate:modelValue":e[9]||(e[9]=o=>q.value=o),"bg-color":"white",class:"w-100"},{default:s(()=>[a(w,{value:"one"},{default:s(()=>e[44]||(e[44]=[V("خرید")])),_:1}),a(w,{value:"two"},{default:s(()=>e[45]||(e[45]=[V("فروش")])),_:1})]),_:1},8,["modelValue"]),t("div",El,[a(sl,{label:"وضعیت پرداخت",items:Me.value,"item-title":"text","item-value":"value",density:"comfortable",variant:"solo",class:"transaction-filter w-100","onUpdate:modelValue":Xe},null,8,["items"])])]),a(je,{modelValue:q.value,"onUpdate:modelValue":e[10]||(e[10]=o=>q.value=o)},{default:s(()=>[a(h,{value:"one",class:"transaction-box"},{default:s(()=>[e[46]||(e[46]=t("div",{class:"d-flex justify-end"},null,-1)),a(Le,{headers:he.value,items:We.value,loading:U.value,class:"transaction-table"},{"item.status":s(({item:o})=>[t("div",ql,[a(X,{text:o.status=="completed"?"موفق":o.status=="pending"?"نامشخص":"ناموفق",color:o.status=="completed"?"green":o.status=="pending"?"#666666":"red",size:"small"},null,8,["text","color"])])]),"item.goldPrice":s(({item:o})=>[t("p",null,i(k(o.goldPrice)),1)]),"item.totalPrice":s(({item:o})=>[t("p",null,i(k(o.totalPrice)),1)]),"item.tradeType":s(({item:o})=>[t("div",Jl,[a(X,{text:o.tradeType==0?"آنلاین":o.tradeType==1?"تلفنی":o.tradeType==2?"حضوری":"حواله",color:"#78909C",size:"small"},null,8,["text"])])]),_:1},8,["headers","items","loading"])]),_:1}),a(h,{value:"two",class:"transaction-box"},{default:s(()=>[a(Le,{headers:he.value,items:we.value,loading:U.value,class:"transaction-table"},{"item.status":s(({item:o})=>[t("div",Kl,[a(X,{text:o.status=="completed"?"موفق":o.status=="pending"?"نامشخص":"ناموفق",color:o.status=="completed"?"green":o.status=="pending"?"#666666":"red",size:"small"},null,8,["text","color"])])]),"item.goldPrice":s(({item:o})=>[t("p",null,i(k(o.goldPrice)),1)]),"item.totalPrice":s(({item:o})=>[t("p",null,i(k(o.totalPrice)),1)]),"item.tradeType":s(({item:o})=>[t("div",Hl,[a(X,{text:o.tradeType==0?"آنلاین":o.tradeType==1?"تلفنی":o.tradeType==2?"حضوری":"حواله",color:"#78909C",size:"small"},null,8,["text"])])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),a(ge,{"max-width":"500",modelValue:S.value,"onUpdate:modelValue":e[14]||(e[14]=o=>S.value=o),class:"trade-modal"},{default:s(()=>[a(me,{class:"trade-modal"},{default:s(()=>[a(Y,{class:"ma-4 text-center",color:"error",text:"مبلغ انتخابی شما طبق فاکتور زیر اصلاح شد",variant:"tonal"}),t("div",Ql,[e[52]||(e[52]=t("h3",null,"فاکتور خرید",-1)),t("div",Xl,[e[48]||(e[48]=t("span",{class:"pe-6"},"موجودی کیف پول",-1)),t("span",null,i(C.value.balance)+" تومان",1)]),t("div",Yl,[e[49]||(e[49]=t("p",{class:"pe-6"},"مقدار طلا",-1)),t("p",null,i(c.value.goldWeight)+" گرم",1)]),t("div",Zl,[e[50]||(e[50]=t("p",{class:"pe-6"},"مبلغ",-1)),t("p",null,i(c.value.goldprice)+" تومان",1)]),t("div",et,[e[51]||(e[51]=t("span",{class:"fee"},"کارمزد 0 درصد",-1)),t("div",lt,[t("span",null,i(N.value),1),a(Ne)])])]),t("div",tt,[a(ol,{modelValue:C.value.cartId,"onUpdate:modelValue":e[11]||(e[11]=o=>C.value.cartId=o),loading:oe.value,label:"انتخاب کارت",items:xe.value,variant:"outlined","item-title":"cardNumber","item-value":"id",rules:[o=>!!o||"لطفا کارت خود را انتخاب کنید"]},null,8,["modelValue","loading","items","rules"])]),t("div",at,[a(g,{text:"پرداخت مستقیم",class:"pay-btn",color:"#9D7E3B",disabled:!C.value.cartId,onClick:e[12]||(e[12]=o=>Ce("direct"))},null,8,["disabled"]),a(g,{text:"پرداخت از کیف پول",class:"pay-btn",color:"#9D7E3B",variant:"outlined",onClick:e[13]||(e[13]=o=>Ce("wallet"))})])]),_:1})]),_:1},8,["modelValue"]),a(ge,{"max-width":"500",modelValue:j.value,"onUpdate:modelValue":e[16]||(e[16]=o=>j.value=o),class:"trade-modal"},{default:s(()=>[a(me,{class:"trade-modal"},{default:s(()=>[a(Y,{class:"ma-4 text-center",color:"error",text:"مبلغ انتخابی شما طبق فاکتور زیر اصلاح شد",variant:"tonal"}),t("div",st,[e[57]||(e[57]=t("h3",null,"فاکتور فروش",-1)),t("div",ot,[e[53]||(e[53]=t("span",{class:"pe-6"},"موجودی کیف پول",-1)),t("span",null,i(B.value.goldWeight)+" گرم",1)]),t("div",nt,[e[54]||(e[54]=t("p",{class:"pe-6"},"مقدار طلا",-1)),t("p",null,i(r.value.goldWeight)+" گرم",1)]),t("div",it,[e[55]||(e[55]=t("p",{class:"pe-6"},"مبلغ",-1)),t("p",null,i(r.value.goldPrice)+" تومان",1)]),t("div",ut,[e[56]||(e[56]=t("span",{class:"fee"},"کارمزد 1 درصد",-1)),t("div",rt,[t("span",null,i(N.value),1),a(Ne)])])]),t("div",dt,[a(g,{text:"تایید فروش",class:"pay-btn",color:"#9D7E3B",onClick:e[15]||(e[15]=o=>Qe())})])]),_:1})]),_:1},8,["modelValue"]),a(ge,{"max-width":"500",modelValue:D.value,"onUpdate:modelValue":e[17]||(e[17]=o=>D.value=o),class:"trade-modal"},{default:s(()=>[a(me,{class:"trade-modal"},{default:s(()=>[t("div",ct,[e[71]||(e[71]=t("h3",{class:"my-4"},"فاکتور انتقال",-1)),a(W,null,{default:s(()=>[a(u,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[t("div",vt,[e[58]||(e[58]=t("p",null,"گرم انتقال :",-1)),t("p",null,i(v.value.goldWeight),1)])]),_:1}),a(u,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[t("div",pt,[e[59]||(e[59]=t("p",null,"شماره فاکتور :",-1)),t("p",null,i(v.value.invoiceId),1)])]),_:1}),a(u,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[t("div",mt,[e[60]||(e[60]=t("p",null,"تاریخ انتقال :",-1)),t("p",null,i(v.value.date),1)])]),_:1}),a(u,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[t("div",gt,[e[61]||(e[61]=t("p",null,"زمان انتقال :",-1)),t("p",null,i(v.value.time),1)])]),_:1}),a(x),a(u,{cols:"12"},{default:s(()=>e[62]||(e[62]=[t("div",{class:"d-flex justify-start"},[t("p",{class:"font-weight-bold"},"اطلاعات انتقال دهنده")],-1)])),_:1}),a(u,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[t("div",ft,[e[63]||(e[63]=t("p",null,"نام :",-1)),t("p",null,i(v.value.sender.firstName),1)])]),_:1}),a(u,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[t("div",yt,[e[64]||(e[64]=t("p",null,"نام خانوادگی :",-1)),t("p",null,i(v.value.sender.lastName),1)])]),_:1}),a(u,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[t("div",bt,[e[65]||(e[65]=t("p",null,"کد ملی :",-1)),t("p",null,i(v.value.sender.nationalCode),1)])]),_:1}),a(u,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[t("div",_t,[e[66]||(e[66]=t("p",null,"موجودی :",-1)),t("p",null,i(v.value.sender.goldWeight)+" گرم",1)])]),_:1}),a(x),a(u,{cols:"12"},{default:s(()=>e[67]||(e[67]=[t("div",{class:"d-flex justify-start"},[t("p",{class:"font-weight-bold"},"اطلاعات گیرنده")],-1)])),_:1}),a(u,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[t("div",xt,[e[68]||(e[68]=t("p",null,"نام :",-1)),t("p",null,i(v.value.reciever.firstName),1)])]),_:1}),a(u,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[t("div",wt,[e[69]||(e[69]=t("p",null,"نام خانوادگی :",-1)),t("p",null,i(v.value.reciever.lastName),1)])]),_:1}),a(u,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[t("div",Wt,[e[70]||(e[70]=t("p",null,"کد ملی :",-1)),t("p",null,i(v.value.reciever.nationalCode),1)])]),_:1})]),_:1})]),t("div",ht,[a(g,{text:"تایید انتقال",class:"pay-btn",color:"#9D7E3B",block:"",loading:te.value,onClick:el},null,8,["loading"])])]),_:1})]),_:1},8,["modelValue"]),d.value?(G(),Z(Y,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:s(()=>[V(i(b.value),1)]),_:1})):ye("",!0),z.value?(G(),Z(Y,{key:1,color:"success",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:s(()=>[V(i(ne.value),1)]),_:1})):ye("",!0)])}}},jt=il(Vt,[["__scopeId","data-v-136a4b2d"]]);export{jt as default};
