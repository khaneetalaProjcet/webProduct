import{P as Gl}from"./price-DpLS_a5R.js";import{T as w}from"./trade-B2OXM3hd.js";import{T as Ye}from"./TimerIcon-BZ1r8QRW.js";import{_ as Ll,u as jl,r as n,x as me,e as Nl,j as f,w as Ze,f as Bl,c as Ue,m as t,l as s,g as N,y as X,z as $l,A as Ol,k as b,o as U,a as l,B as W,p as u,D as fe,q as el,n as ll}from"./index-CJiueWcb.js";import{x as al}from"./persian-tools.esm-CBI2Czng.js";const Ml={class:"goldbox-section buy me-2"},zl={class:"live-price-box"},Dl={class:"fade-badge"},Fl={class:"d-flex justify-center align-center order-2"},Rl={class:"price-in-word"},El={class:"goldbox-section"},Al={class:"wallet-box"},ql={class:"d-flex justify-space-between py-2 px-4 my-1"},Jl={class:"mb-0"},Kl={class:"d-flex justify-space-between py-2 px-4 my-1"},Hl={class:"mb-0"},Ql={class:"my-2"},Xl={class:"goldbox-section sell me-2"},Yl={class:"live-price-box"},Zl={class:"fade-badge"},ea={class:"d-flex justify-center align-center order-2"},la={class:"price-in-word"},aa={class:"goldbox-section"},ta={class:"wallet-box sell"},sa={class:"d-flex justify-space-between py-2 px-4 my-1"},oa={class:"mb-0"},na={class:"d-flex justify-space-between py-2 px-4 my-1"},ua={class:"mb-0"},ia={class:"my-2"},da={class:"d-flex flex-column goldbox-section transfer"},ra={class:"d-flex flex-column flex-md-row justify-center w-100"},va={class:"w-100 me-md-4"},ca={class:"w-100 ms-md-4"},pa={key:0,class:"d-flex flex-column"},ma={class:"transfer-otp"},fa={class:"d-flex justify-end w-100 mt-3"},ga={class:"d-flex flex-column goldbox-section use"},ya={key:0,class:"d-flex flex-column align-center"},ba={class:"transfer-otp"},xa={class:"d-flex justify-end w-100 mt-3"},_a={class:"trade-history pa-md-3"},wa={class:"d-flex flex-column flex-md-row justify-space-between"},Ia={class:"d-flex justify-start justify-md-end w-100 mt-3"},Va={class:""},Wa={class:""},ha={class:""},Ta={class:""},Pa={class:"buyModal-content py-5"},Ca={class:"wallet-badge my-2"},Sa={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},ka={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},Ua={class:"d-flex justify-space-evenly align-center w-100 my-2"},Ga={class:"d-flex"},La={class:"my-4"},ja={class:"d-flex justify-space-around mt-2 mb-7"},Na={class:"buyModal-content py-5"},Ba={class:"wallet-badge my-2"},$a={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},Oa={class:"d-flex justify-space-evenly align-center w-100 my-2 k-text"},Ma={class:"d-flex justify-space-evenly align-center w-100 my-2"},za={class:"d-flex"},Da={class:"d-flex justify-space-around mt-2 mb-7"},Fa={class:"transferModal-content py-5"},Ra={class:"d-flex align-center"},Ea={class:"d-flex align-center"},Aa={class:"d-flex align-center"},qa={class:"d-flex align-center"},Ja={class:"d-flex align-center"},Ka={class:"d-flex align-center"},Ha={class:"d-flex align-center"},Qa={class:"d-flex align-center"},Xa={class:"d-flex align-center"},Ya={class:"d-flex align-center"},Za={class:"d-flex align-center"},et={class:"d-flex justify-space-around mt-2 mb-7"},lt={class:"transferModal-content py-5"},at={class:"d-flex align-center"},tt={class:"d-flex align-center"},st={class:"d-flex align-center"},ot={class:"d-flex align-center"},nt={class:"d-flex align-center"},ut={class:"d-flex align-center"},it={class:"d-flex align-center"},dt={class:"d-flex align-center"},rt={class:"d-flex align-center"},vt={class:"d-flex align-center"},ct={class:"d-flex align-center"},pt={class:"d-flex justify-space-around mt-2 mb-7"},mt={__name:"GoldBoxView",setup(ft){const B=jl(),Ge=$l(),Y=n(!1),tl=n(""),Z=n(null),E=n(!1),A=n(!1),Le=n(!1),ge=n(!1),ye=n(!1),be=n(!1),xe=n(!1),_e=n(!1),we=n(!1),je=n(!1),Ne=n(!1),Ie=n(!1),m=n(""),ee=n(""),d=n(!1),L=n(!1),$=n(!1),O=n(!1),S=n(!1),le=n(null),M=n(!1),z=n(!1),ae=n(120),te=n(120),x=n({goldWeight:"",nationalCode:""}),p=n({goldWeight:"",branchId:"",sellerId:""}),_=n({}),Be=n([{label:"آنلاین",value:"0"},{label:"کوچصفهان",value:"1"}]),se=n(!1),$e=n([]),Ve=n(""),We=n(""),Oe=n([]),h=n({sellPrice:"",buyPrice:"",change:""}),D=n(30),F=n(!1),Me=n(),ze=n(),De=n([{title:"تاریخ",key:"date"},{title:"روش ثبت",key:"tradeType"},{title:"زمان",key:"time"},{title:"وزن طلا(گرم)",key:"goldWeight"},{title:"قیمت نهایی",key:"totalPrice"},{title:"قیمت طلا در لحظه",key:"goldPrice"},{title:"وضعیت",key:"status"}]),sl=n([{text:"همه",value:""},{text:"موفق",value:"success"},{text:"ناموفق",value:"failed"},{text:"نامشخص",value:"pending"}]);let oe=n(null);const he=n({invoiceId:"",paymentUrl:""});let ne=null,ue=null;const c=n({id:"",time:"",date:"",goldWeight:"",invoiceId:"",reciever:{firstName:"",lastName:"",nationalCode:""},sender:{firstName:"",lastName:"",nationalCode:"",goldWeight:""}}),v=n({goldprice:"",goldWeight:""}),r=n({goldPrice:"",goldWeight:""}),G=n({invoiceId:"",isFromWallet:"",balance:0,cartId:null}),R=n({invoiceId:"",isFromWallet:"",balance:0,goldWeight:0}),q=n({type:"",totalPrice:"",goldPrice:"",goldWeight:""}),J=n({type:"",totalPrice:"",goldPrice:"",goldWeight:""}),Te=n({status:""}),Pe=n({}),K=[a=>!!a||"مقدار ورودی نمی‌تواند خالی باشد",a=>/^\d+(\.\d{1,3})?$/.test(a)||"فقط عدد مجاز است و حداکثر 3 رقم اعشار"],Fe=[a=>!!a||"کد ملی الزامی است",a=>/^\d{10}$/.test(a)||"کد ملی باید ۱۰ رقم باشد",a=>{if(!/^\d{10}$/.test(a))return!0;const e=+a[9],i=a.split("").slice(0,9).reduce((T,k,I)=>T+ +k*(10-I),0)%11;return i<2&&e===i||i>=2&&e+i===11||"کد ملی نامعتبر است"}],C=a=>a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),ol=me(()=>{if(v.value.goldprice&&v.value.goldprice!=""){const a=v.value.goldprice.toString().replace(/,/g,""),e=parseInt(a,10);return e<1?"کمتر از یک تومان":al(Math.floor(e))+" تومان"}return""}),nl=me(()=>{if(r.value.goldPrice&&r.value.goldPrice!=""){const a=r.value.goldPrice.toString().replace(/,/g,""),e=parseInt(a,10);return e<1?"کمتر از یک تومان":al(Math.floor(e))+" تومان"}return""}),Re=async()=>{try{Le.value=!0;const a=await Gl.GoldPrice();return h.value.buyPrice=a.buyPrice,h.value.sellPrice=a.sellPrice,h.value.change=a.change,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{Le.value=!1}},ul=async()=>{try{we.value=!0;const a=await Ol.GetCarts();return Oe.value=a.data.bankAccounts,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{we.value=!1}},ie=a=>a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),Ee=a=>a.replace(/,/g,""),il=a=>{const e=a.target.selectionStart,i=v.value.goldprice.length,T=Ee(v.value.goldprice).replace(/[^0-9]/g,""),k=parseInt(T||0);let g=(k/h.value.buyPrice).toFixed(5).split(""),y=`${g[0]}${g[1]}${g[2]}${g[3]}${g[4]}`;console.log(y),v.value.goldWeight=y;const V=ie(k);v.value.goldprice=V,ll(()=>{const P=V.length-i;a.target.setSelectionRange(e+P,e+P)})},dl=()=>{v.value.goldWeight=v.value.goldWeight.replace(/[^0-9.]/g,"");const a=v.value.goldWeight.split(".");a.length>1&&(v.value.goldWeight=a[0]+"."+a.slice(1).join("")),a.length>1&&a[1].length>2&&(v.value.goldWeight=a[0]+"."+a[1].slice(0,3)),v.value.goldprice=parseInt(v.value.goldWeight*h.value.buyPrice);const e=parseInt(v.value.goldWeight*h.value.buyPrice);v.value.goldprice=ie(e)},rl=a=>{const e=a.target.selectionStart,i=r.value.goldPrice.length,T=Ee(r.value.goldPrice).replace(/[^0-9]/g,""),k=parseInt(T||0);let I=(k/h.value.buyPrice).toFixed(5);console.log("ddd",I);let g=I.split(""),y=`${g[0]}${g[1]}${g[2]}${g[3]}${g[4]}`;console.log("ddd222",y),r.value.goldWeight=y;const V=ie(k);r.value.goldPrice=V,ll(()=>{const P=V.length-i;a.target.setSelectionRange(e+P,e+P)})},vl=()=>{r.value.goldWeight=r.value.goldWeight.replace(/[^0-9.]/g,"");const a=r.value.goldWeight.split(".");a.length>1&&(r.value.goldWeight=a[0]+"."+a.slice(1).join("")),a.length>1&&a[1].length>2&&(r.value.goldWeight=a[0]+"."+a[1].slice(0,3)),r.value.goldPrice=parseInt(r.value.goldWeight*h.value.sellPrice);const e=parseInt(r.value.goldWeight*h.value.sellPrice);r.value.goldPrice=ie(e)},cl=()=>{x.value.goldWeight=x.value.goldWeight.replace(/[^0-9.]/g,"");const a=x.value.goldWeight.split(".");a.length>1&&(a[1]=a[1].slice(0,3),x.value.goldWeight=a[0]+"."+a[1])},pl=()=>{p.value.goldWeight=p.value.goldWeight.replace(/[^0-9.]/g,"");const a=p.value.goldWeight.split(".");a.length>1&&(a[1]=a[1].slice(0,3),p.value.goldWeight=a[0]+"."+a[1])},Ae=()=>{S.value=!S.value},ml=[a=>!!a||"مقدار ورودی نمی‌تواند خالی باشد",a=>/^\d+(\.\d{1,3})?$/.test(a)||"فقط عدد مجاز است و حداکثر 4 رقم اعشار"],fl=async()=>{try{E.value=!0,q.value.type="buy",q.value.totalPrice=v.value.goldprice,q.value.goldWeight=v.value.goldWeight,q.value.goldPrice=h.value.buyPrice;const a=await w.createInvoice(q.value);return G.value.invoiceId=a.transactionId,G.value.balance=a.wallet.balance,$.value=!0,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{E.value=!1}},qe=async a=>{try{E.value=!0,a=="wallet"?G.value.isFromWallet=!0:G.value.isFromWallet=!1;const e=await w.complateTransaction(G.value);return e.isFromWallet==!0?($.value=!1,f.replace("/")):(he.value.paymentUrl=e.paymentUrl,he.value.invoiceId=e.invoiceId,window.location.href=he.value.paymentUrl),e}catch(e){e.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=e.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{E.value=!1,Se()}},gl=async()=>{try{A.value=!0,J.value.type="sell",J.value.totalPrice=r.value.goldPrice,J.value.goldWeight=r.value.goldWeight,J.value.goldPrice=h.value.sellPrice;const a=await w.createSellInvoice(J.value);return R.value.invoiceId=a.transactionId,R.value.balance=a.wallet.balance,R.value.goldWeight=a.wallet.goldWeight,r.value.goldPrice="",r.value.goldPrice="",O.value=!0,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{A.value=!1}},yl=async()=>{try{A.value=!0,R.value.fee=1;const a=await w.complateSellTransaction(R.value);return O.value=!1,ee.value="طلای شما با موفقیت به فروش رسید",L.value=!0,B.GetUser(),setTimeout(()=>{L.value=!1},5e3),a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{A.value=!1,Ce()}},bl=a=>{Te.value.status=a.value,Ce(),Se()},Ce=async()=>{try{F.value=!0;const a=await w.GoldBoxSellTransactions(Te.value);return Me.value=a,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{F.value=!1}},Se=async()=>{try{F.value=!0;const a=await w.GoldBoxBuyTransactions(Te.value);return ze.value=a,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}finally{F.value=!1}},xl=async a=>{try{const e=await w.VerifyTransaction(a);return Pe.value=e,e}catch(e){e.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=e.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},1e4)}},Je=me(()=>K.every(a=>a(x.value.goldWeight)===!0)&&Fe.every(a=>a(x.value.nationalCode)===!0)),_l=async()=>{try{xe.value=!0;const a=await w.CreateTransfer(x.value);return Y.value=!0,c.value=a.data,c.value.id=a.data.id,c.value.invoiceId=a.data.invoiceId,c.value.date=a.data.date,c.value.time=a.data.time,c.value.sender.firstName=a.data.sender.firstName,c.value.sender.lastName=a.data.sender.lastName,c.value.sender.nationalCode=a.data.sender.nationalCode,c.value.sender.goldWeight=a.data.sender.wallet.goldWeight,c.value.reciever.firstName=a.data.reciever.firstName,c.value.reciever.lastName=a.data.reciever.lastName,c.value.reciever.nationalCode=a.data.reciever.nationalCode,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{xe.value=!1}},wl=async()=>{try{ge.value=!0;const a=await w.TransferOtp(c.value.id);return Y.value=!1,M.value=!0,Vl(),a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{ge.value=!1}},Il=async()=>{try{ye.value=!0;const a=await w.VerifyTransferOtp(Ve.value,c.value.id);return M.value=!1,x.value.nationalCode=null,x.value.goldWeight=null,ee.value=a.msg,L.value=!0,B.GetUser(),setTimeout(()=>{L.value=!1},5e3),a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{ye.value=!1}},Vl=()=>{ae.value=120,ne&&clearInterval(ne),ne=setInterval(()=>{ae.value--,ae.value<=0&&(clearInterval(ne),M.value&&(M.value=!1,x.value.nationalCode=null,x.value.goldWeight=null,m.value="زمان تایید انتقال به پایان رسیده است",d.value=!0,setTimeout(()=>{d.value=!1},5e3)))},1e3)},Wl=()=>{te.value=120,ue&&clearInterval(ue),ue=setInterval(()=>{te.value--,te.value<=0&&(clearInterval(ue),z.value&&(z.value=!1,p.value.branchId=null,p.value.sellerId=null,p.value.goldWeight=null,m.value="زمان استفاده به پایان رسیده است",d.value=!0,setTimeout(()=>{d.value=!1},5e3)))},1e3)},de=[a=>!!a||"یک مورد را انتخاب کنید!"],hl=me(()=>p.value.goldWeight&&!K.some(a=>a(p.value.goldWeight)!==!0)&&p.value.branchId&&!de.some(a=>a(p.value.branchId)!==!0)&&(p.value.sellerId||!0)&&!de.some(a=>a(p.value.sellerId)!==!0)),Tl=async()=>{try{je.value=!0;const a=await w.GetBranches();return Be.value=a.data,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{je.value=!1}},Pl=async a=>{try{Ne.value=!0;const e=await w.GetSellers(a);return $e.value=e.data,e}catch(e){e.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=e.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{Ne.value=!1}},Cl=async()=>{try{Ie.value=!0;const a=await w.CreateUseGold(p.value);return _.value=a.data,console.log(_.value),se.value=!0,a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{Ie.value=!1}},Sl=async()=>{try{_e.value=!0;const a=await w.UseGoldOtp(_.value.id);return se.value=!1,z.value=!0,Wl(),a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{_e.value=!1}},kl=async()=>{try{be.value=!0;const a=await w.VerifyUseGold(We.value,_.value.id);return z.value=!1,p.value.goldWeight=null,p.value.sellerId=null,p.value.branchId=null,ee.value=a.msg,L.value=!0,B.GetUser(),setTimeout(()=>{L.value=!1},5e3),a}catch(a){a.response.status==401&&(localStorage.clear(),f.replace("/Login")),m.value=a.response.data.msg||"خطایی رخ داده است!",d.value=!0,setTimeout(()=>{d.value=!1},5e3)}finally{be.value=!1}};Nl(()=>{Re(),Se(),Ce(),ul(),Tl(),B.GetUser(),setInterval(()=>{Re()},3e4),tl.value=JSON.parse(localStorage.getItem("user"));const a=n({authority:Ge.query.Authority,status:Ge.query.Status});a.value.authority&&a.value.status&&(xl(a.value),a.value.status==="OK"?f.push({name:"success",state:Pe.value}):f.push({name:"failed",state:Pe.value}))}),Ze($,a=>{a?(D.value=30,Ke()):H()}),Ze(O,a=>{a?(D.value=30,Ke()):H()});const Ke=()=>{H(),oe=setInterval(()=>{D.value>0?D.value--:(H(),$.value=!1,O.value=!1)},1e3)},H=()=>{oe&&(clearInterval(oe),oe=null)};return Bl(()=>{H()}),(a,e)=>{const i=b("v-col"),T=b("v-tab"),k=b("v-tabs"),I=b("v-row"),g=b("v-text-field"),y=b("v-btn"),V=b("v-divider"),j=b("v-container"),P=b("v-tabs-window-item"),He=b("v-otp-input"),ke=b("v-select"),Qe=b("v-tabs-window"),Ul=b("v-combobox"),re=b("v-chip"),Xe=b("v-data-table"),ve=b("v-alert"),ce=b("v-card"),pe=b("v-dialog");return U(),Ue("div",null,[t(j,{class:"px-0",fluid:""},{default:s(()=>[t(I,{class:"my-1"},{default:s(()=>[t(i,{cols:"12"},{default:s(()=>e[23]||(e[23]=[l("div",{class:"d-flex flex-column align-center"},[l("h3",{class:"title"},"خرید و فروش طلا")],-1)])),_:1}),t(i,{cols:"12"},{default:s(()=>[t(k,{modelValue:Z.value,"onUpdate:modelValue":e[0]||(e[0]=o=>Z.value=o),"bg-color":"white",class:"tab-header"},{default:s(()=>[t(T,{value:"one"},{default:s(()=>e[24]||(e[24]=[W("خرید")])),_:1}),t(T,{value:"two"},{default:s(()=>e[25]||(e[25]=[W("فروش")])),_:1}),t(T,{value:"three"},{default:s(()=>e[26]||(e[26]=[W("انتقال")])),_:1}),t(T,{value:"four"},{default:s(()=>e[27]||(e[27]=[W("استفاده")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(Qe,{modelValue:Z.value,"onUpdate:modelValue":e[12]||(e[12]=o=>Z.value=o),class:"my-1"},{default:s(()=>[t(P,{value:"one"},{default:s(()=>[t(j,null,{default:s(()=>[t(I,null,{default:s(()=>[t(i,{cols:"12",md:"7",class:"pa-0 my-2"},{default:s(()=>[l("div",Ml,[l("div",zl,[e[28]||(e[28]=l("span",{class:"live-tag"},"لحظه ای",-1)),e[29]||(e[29]=l("p",null,"قیمت طلای 18 عیار:",-1)),l("p",Dl,u(C(h.value.buyPrice))+" تومان ",1)]),l("div",{class:fe(["my-1",{"order-3":S.value,"order-1":!S.value}])},[e[30]||(e[30]=l("span",null,"وزن طلا (گرم)",-1)),t(g,{modelValue:v.value.goldWeight,"onUpdate:modelValue":e[1]||(e[1]=o=>v.value.goldWeight=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:dl,rules:ml,class:"transition-field"},null,8,["modelValue"])],2),l("div",Fl,[t(y,{icon:"mdi-swap-horizontal",variant:"text",class:"change-btn",onClick:Ae})]),l("div",{class:fe(["my-1",{"order-1":S.value,"order-3":!S.value}])},[e[31]||(e[31]=l("span",null,"مبلغ (تومان)",-1)),t(g,{modelValue:v.value.goldprice,"onUpdate:modelValue":e[2]||(e[2]=o=>v.value.goldprice=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:il,class:"transition-field"},null,8,["modelValue"]),l("p",Rl,u(ol.value),1)],2)])]),_:1}),t(i,{cols:"12",md:"5",class:"pa-0 my-2"},{default:s(()=>{var o,Q;return[l("div",El,[l("div",Al,[e[32]||(e[32]=l("p",null,"موجودی کیف پول :",-1)),l("p",null,u(C(+((Q=(o=el(B).user)==null?void 0:o.wallet)==null?void 0:Q.balance)))+" تومان",1)]),l("div",ql,[e[33]||(e[33]=l("p",{class:"mb-0"},"گرم طلا :",-1)),l("p",Jl,u(v.value.goldWeight)+" گرم",1)]),t(V),e[36]||(e[36]=l("div",{class:"d-flex justify-space-between py-2 px-4 my-1"},[l("p",{class:"mb-0"},"کارمزد خرید :"),l("p",{class:"mb-0"},"0٪")],-1)),t(V),l("div",Kl,[e[34]||(e[34]=l("p",{class:"mb-0"},"مبلغ قابل پرداخت :",-1)),l("p",Hl,u(C(v.value.goldprice))+" تومان ",1)]),l("div",Ql,[t(y,{color:"#00603a",loading:E.value,onClick:fl,block:""},{default:s(()=>e[35]||(e[35]=[W("خرید")])),_:1},8,["loading"])])])]}),_:1})]),_:1})]),_:1})]),_:1}),t(P,{value:"two"},{default:s(()=>[t(j,null,{default:s(()=>[t(I,null,{default:s(()=>[t(i,{cols:"12",md:"7",class:"pa-0 my-2"},{default:s(()=>[l("div",Xl,[l("div",Yl,[e[37]||(e[37]=l("span",{class:"live-tag"},"لحظه ای",-1)),e[38]||(e[38]=l("p",null,"قیمت طلای 18 عیار:",-1)),l("p",Zl,u(C(h.value.buyPrice))+" تومان ",1)]),l("div",{class:fe(["my-1",{"order-3":S.value,"order-1":!S.value}])},[e[39]||(e[39]=l("span",null,"وزن طلا (گرم)",-1)),t(g,{modelValue:r.value.goldWeight,"onUpdate:modelValue":e[3]||(e[3]=o=>r.value.goldWeight=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:vl,rules:K},null,8,["modelValue"])],2),l("div",ea,[t(y,{icon:"mdi-swap-horizontal",variant:"text",class:"change-btn",onClick:Ae})]),l("div",{class:fe(["my-1",{"order-1":S.value,"order-3":!S.value}])},[e[40]||(e[40]=l("span",null,"مبلغ (تومان)",-1)),t(g,{modelValue:r.value.goldPrice,"onUpdate:modelValue":e[4]||(e[4]=o=>r.value.goldPrice=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",onInput:rl},null,8,["modelValue"]),l("p",la,u(nl.value),1)],2)])]),_:1}),t(i,{cols:"12",md:"5",class:"pa-0 my-2"},{default:s(()=>{var o,Q;return[l("div",aa,[l("div",ta,[e[41]||(e[41]=l("p",null,"موجودی صندوق طلا :",-1)),l("p",null,u((Q=(o=el(B).user)==null?void 0:o.wallet)==null?void 0:Q.goldWeight)+" گرم",1)]),l("div",sa,[e[42]||(e[42]=l("p",{class:"mb-0"},"گرم طلا :",-1)),l("p",oa,u(r.value.goldWeight)+" گرم",1)]),t(V),e[45]||(e[45]=l("div",{class:"d-flex justify-space-between py-2 px-4 my-1"},[l("p",{class:"mb-0"},"کارمزد فروش :"),l("p",{class:"mb-0"},"1٪")],-1)),t(V),l("div",na,[e[43]||(e[43]=l("p",{class:"mb-0"},"مبلغ قابل پرداخت :",-1)),l("p",ua,u(C(r.value.goldPrice))+" تومان ",1)]),l("div",ia,[t(y,{color:"#930606",loading:A.value,onClick:gl,block:""},{default:s(()=>e[44]||(e[44]=[W("فروش")])),_:1},8,["loading"])])])]}),_:1})]),_:1})]),_:1})]),_:1}),t(P,{value:"three"},{default:s(()=>[t(j,null,{default:s(()=>[t(I,null,{default:s(()=>[t(i,{cols:"12",class:"pa-0 my-2"},{default:s(()=>[l("div",da,[l("div",ra,[l("div",va,[e[46]||(e[46]=l("span",null,"وزن طلا (گرم)",-1)),t(g,{modelValue:x.value.goldWeight,"onUpdate:modelValue":e[5]||(e[5]=o=>x.value.goldWeight=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",class:"transition-field",rules:K,onInput:cl},null,8,["modelValue"])]),l("div",ca,[e[47]||(e[47]=l("span",null,"کد ملی گیرنده",-1)),t(g,{modelValue:x.value.nationalCode,"onUpdate:modelValue":e[6]||(e[6]=o=>x.value.nationalCode=o),variant:"outlined",color:"rgba(135, 104, 36, 1)",density:"compact",class:"transition-field",rules:Fe},null,8,["modelValue"])])]),M.value?(U(),Ue("div",pa,[t(He,{length:4,modelValue:Ve.value,"onUpdate:modelValue":e[7]||(e[7]=o=>Ve.value=o),type:"number",variant:"outlined",class:"otp-input",inputmode:"numeric",autocomplete:"one-time-code",onInput:a.handleOTPInput},null,8,["modelValue","onInput"]),l("p",ma," زمان باقی مانده : "+u(ae.value)+" ثانیه ",1)])):X("",!0),l("div",fa,[M.value?(U(),N(y,{key:1,color:"#af8b4a",class:"px-8",onClick:Il,disabled:!Je.value,loading:ye.value},{default:s(()=>e[49]||(e[49]=[W("تایید")])),_:1},8,["disabled","loading"])):(U(),N(y,{key:0,color:"#af8b4a",class:"px-8",onClick:_l,disabled:!Je.value,loading:xe.value},{default:s(()=>e[48]||(e[48]=[W("ثبت انتقال")])),_:1},8,["disabled","loading"]))])])]),_:1})]),_:1})]),_:1})]),_:1}),t(P,{value:"four"},{default:s(()=>[t(j,null,{default:s(()=>[t(I,null,{default:s(()=>[t(i,{cols:"12",class:"pa-0 my-2"},{default:s(()=>[l("div",ga,[t(I,null,{default:s(()=>[t(i,{cols:"12",md:"4",class:"my-6"},{default:s(()=>[t(g,{modelValue:p.value.goldWeight,"onUpdate:modelValue":e[8]||(e[8]=o=>p.value.goldWeight=o),label:"وزن طلا (گرم)",variant:"outlined",color:"rgba(135, 104, 36, 1)",class:"transition-field",rules:K,onInput:pl},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",md:"4",class:"my-6"},{default:s(()=>[t(ke,{modelValue:p.value.branchId,"onUpdate:modelValue":[e[9]||(e[9]=o=>p.value.branchId=o),Pl],items:Be.value,label:"شعبه ها",variant:"outlined",rules:de,"item-title":"name","item-value":"id"},null,8,["modelValue","items"])]),_:1}),t(i,{cols:"12",md:"4",class:"my-6"},{default:s(()=>[p.value.branchId?(U(),N(ke,{key:0,modelValue:p.value.sellerId,"onUpdate:modelValue":e[10]||(e[10]=o=>p.value.sellerId=o),items:$e.value,label:"فروشنده",variant:"outlined",rules:de,"item-title":"lastName","item-value":"id"},null,8,["modelValue","items"])):X("",!0)]),_:1})]),_:1}),z.value?(U(),Ue("div",ya,[e[50]||(e[50]=l("p",{class:"transfer-otp"},"کد احراز برای فروشنده ارسال شد",-1)),t(He,{length:4,modelValue:We.value,"onUpdate:modelValue":e[11]||(e[11]=o=>We.value=o),type:"number",variant:"outlined",class:"otp-input",inputmode:"numeric",autocomplete:"one-time-code",onInput:a.handleOTPInput},null,8,["modelValue","onInput"]),l("p",ba," زمان باقی مانده : "+u(te.value)+" ثانیه ",1)])):X("",!0),l("div",xa,[z.value?(U(),N(y,{key:1,color:"#af8b4a",class:"px-8",onClick:kl,loading:be.value},{default:s(()=>e[52]||(e[52]=[W("تایید")])),_:1},8,["loading"])):(U(),N(y,{key:0,color:"#af8b4a",class:"px-8",onClick:Cl,loading:Ie.value,disabled:!hl.value},{default:s(()=>e[51]||(e[51]=[W("ثبت استفاده")])),_:1},8,["loading","disabled"]))])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[56]||(e[56]=l("h3",{class:"title mt-10"},"تاریخچه تراکنش ها",-1)),l("div",_a,[l("div",wa,[t(k,{modelValue:le.value,"onUpdate:modelValue":e[13]||(e[13]=o=>le.value=o),"bg-color":"white",class:"w-100"},{default:s(()=>[t(T,{value:"one"},{default:s(()=>e[53]||(e[53]=[W("خرید")])),_:1}),t(T,{value:"two"},{default:s(()=>e[54]||(e[54]=[W("فروش")])),_:1})]),_:1},8,["modelValue"]),l("div",Ia,[t(Ul,{label:"وضعیت پرداخت",items:sl.value,"item-title":"text","item-value":"value",density:"comfortable",variant:"solo",class:"transaction-filter w-100","onUpdate:modelValue":bl},null,8,["items"])])]),t(Qe,{modelValue:le.value,"onUpdate:modelValue":e[14]||(e[14]=o=>le.value=o)},{default:s(()=>[t(P,{value:"one",class:"transaction-box"},{default:s(()=>[e[55]||(e[55]=l("div",{class:"d-flex justify-end"},null,-1)),t(Xe,{headers:De.value,items:ze.value,loading:F.value,class:"transaction-table"},{"item.status":s(({item:o})=>[l("div",Va,[t(re,{text:o.status=="completed"?"موفق":o.status=="pending"?"نامشخص":"ناموفق",color:o.status=="completed"?"green":o.status=="pending"?"#666666":"red",size:"small"},null,8,["text","color"])])]),"item.goldPrice":s(({item:o})=>[l("p",null,u(C(o.goldPrice)),1)]),"item.totalPrice":s(({item:o})=>[l("p",null,u(C(o.totalPrice)),1)]),"item.tradeType":s(({item:o})=>[l("div",Wa,[t(re,{text:o.tradeType==0?"آنلاین":o.tradeType==1?"تلفنی":o.tradeType==2?"حضوری":"حواله",color:"#78909C",size:"small"},null,8,["text"])])]),_:1},8,["headers","items","loading"])]),_:1}),t(P,{value:"two",class:"transaction-box"},{default:s(()=>[t(Xe,{headers:De.value,items:Me.value,loading:F.value,class:"transaction-table"},{"item.status":s(({item:o})=>[l("div",ha,[t(re,{text:o.status=="completed"?"موفق":o.status=="pending"?"نامشخص":"ناموفق",color:o.status=="completed"?"green":o.status=="pending"?"#666666":"red",size:"small"},null,8,["text","color"])])]),"item.goldPrice":s(({item:o})=>[l("p",null,u(C(o.goldPrice)),1)]),"item.totalPrice":s(({item:o})=>[l("p",null,u(C(o.totalPrice)),1)]),"item.tradeType":s(({item:o})=>[l("div",Ta,[t(re,{text:o.tradeType==0?"آنلاین":o.tradeType==1?"تلفنی":o.tradeType==2?"حضوری":"حواله",color:"#78909C",size:"small"},null,8,["text"])])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),t(pe,{"max-width":"500",modelValue:$.value,"onUpdate:modelValue":e[18]||(e[18]=o=>$.value=o),class:"trade-modal"},{default:s(()=>[t(ce,{class:"trade-modal"},{default:s(()=>[t(ve,{class:"ma-4 text-center",color:"error",text:"مبلغ انتخابی شما طبق فاکتور زیر اصلاح شد",variant:"tonal"}),l("div",Pa,[e[61]||(e[61]=l("h3",null,"فاکتور خرید",-1)),l("div",Ca,[e[57]||(e[57]=l("span",{class:"pe-6"},"موجودی کیف پول",-1)),l("span",null,u(G.value.balance)+" تومان",1)]),l("div",Sa,[e[58]||(e[58]=l("p",{class:"pe-6"},"مقدار طلا",-1)),l("p",null,u(v.value.goldWeight)+" گرم",1)]),l("div",ka,[e[59]||(e[59]=l("p",{class:"pe-6"},"مبلغ",-1)),l("p",null,u(v.value.goldprice)+" تومان",1)]),l("div",Ua,[e[60]||(e[60]=l("span",{class:"fee"},"کارمزد 0 درصد",-1)),l("div",Ga,[l("span",null,u(D.value),1),t(Ye)])])]),l("div",La,[t(ke,{modelValue:G.value.cartId,"onUpdate:modelValue":e[15]||(e[15]=o=>G.value.cartId=o),loading:we.value,label:"انتخاب کارت",items:Oe.value,variant:"outlined","item-title":"cardNumber","item-value":"id",rules:[o=>!!o||"لطفا کارت خود را انتخاب کنید"]},null,8,["modelValue","loading","items","rules"])]),l("div",ja,[t(y,{text:"پرداخت مستقیم",class:"pay-btn",color:"#9D7E3B",disabled:!G.value.cartId,onClick:e[16]||(e[16]=o=>qe("direct"))},null,8,["disabled"]),t(y,{text:"پرداخت از کیف پول",class:"pay-btn",color:"#9D7E3B",variant:"outlined",onClick:e[17]||(e[17]=o=>qe("wallet"))})])]),_:1})]),_:1},8,["modelValue"]),t(pe,{"max-width":"500",modelValue:O.value,"onUpdate:modelValue":e[20]||(e[20]=o=>O.value=o),class:"trade-modal"},{default:s(()=>[t(ce,{class:"trade-modal"},{default:s(()=>[t(ve,{class:"ma-4 text-center",color:"error",text:"مبلغ انتخابی شما طبق فاکتور زیر اصلاح شد",variant:"tonal"}),l("div",Na,[e[66]||(e[66]=l("h3",null,"فاکتور فروش",-1)),l("div",Ba,[e[62]||(e[62]=l("span",{class:"pe-6"},"موجودی کیف پول",-1)),l("span",null,u(R.value.goldWeight)+" گرم",1)]),l("div",$a,[e[63]||(e[63]=l("p",{class:"pe-6"},"مقدار طلا",-1)),l("p",null,u(r.value.goldWeight)+" گرم",1)]),l("div",Oa,[e[64]||(e[64]=l("p",{class:"pe-6"},"مبلغ",-1)),l("p",null,u(r.value.goldPrice)+" تومان",1)]),l("div",Ma,[e[65]||(e[65]=l("span",{class:"fee"},"کارمزد 1 درصد",-1)),l("div",za,[l("span",null,u(D.value),1),t(Ye)])])]),l("div",Da,[t(y,{text:"تایید فروش",class:"pay-btn",color:"#9D7E3B",onClick:e[19]||(e[19]=o=>yl())})])]),_:1})]),_:1},8,["modelValue"]),t(pe,{"max-width":"500",modelValue:Y.value,"onUpdate:modelValue":e[21]||(e[21]=o=>Y.value=o),class:"trade-modal"},{default:s(()=>[t(ce,{class:"trade-modal"},{default:s(()=>[l("div",Fa,[e[80]||(e[80]=l("h3",{class:"my-4"},"فاکتور انتقال",-1)),t(I,null,{default:s(()=>[t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Ra,[e[67]||(e[67]=l("p",null,"گرم انتقال :",-1)),l("p",null,u(c.value.goldWeight),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Ea,[e[68]||(e[68]=l("p",null,"شماره فاکتور :",-1)),l("p",null,u(c.value.invoiceId),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Aa,[e[69]||(e[69]=l("p",null,"تاریخ انتقال :",-1)),l("p",null,u(c.value.date),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",qa,[e[70]||(e[70]=l("p",null,"زمان انتقال :",-1)),l("p",null,u(c.value.time),1)])]),_:1}),t(V),t(i,{cols:"12"},{default:s(()=>e[71]||(e[71]=[l("div",{class:"d-flex justify-start"},[l("p",{class:"font-weight-bold"},"اطلاعات انتقال دهنده")],-1)])),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Ja,[e[72]||(e[72]=l("p",null,"نام :",-1)),l("p",null,u(c.value.sender.firstName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Ka,[e[73]||(e[73]=l("p",null,"نام خانوادگی :",-1)),l("p",null,u(c.value.sender.lastName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Ha,[e[74]||(e[74]=l("p",null,"کد ملی :",-1)),l("p",null,u(c.value.sender.nationalCode),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Qa,[e[75]||(e[75]=l("p",null,"موجودی :",-1)),l("p",null,u(c.value.sender.goldWeight)+" گرم",1)])]),_:1}),t(V),t(i,{cols:"12"},{default:s(()=>e[76]||(e[76]=[l("div",{class:"d-flex justify-start"},[l("p",{class:"font-weight-bold"},"اطلاعات گیرنده")],-1)])),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Xa,[e[77]||(e[77]=l("p",null,"نام :",-1)),l("p",null,u(c.value.reciever.firstName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Ya,[e[78]||(e[78]=l("p",null,"نام خانوادگی :",-1)),l("p",null,u(c.value.reciever.lastName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",Za,[e[79]||(e[79]=l("p",null,"کد ملی :",-1)),l("p",null,u(c.value.reciever.nationalCode),1)])]),_:1})]),_:1})]),l("div",et,[t(y,{text:"تایید انتقال",class:"pay-btn",color:"#9D7E3B",block:"",loading:ge.value,onClick:wl},null,8,["loading"])])]),_:1})]),_:1},8,["modelValue"]),t(pe,{"max-width":"500",modelValue:se.value,"onUpdate:modelValue":e[22]||(e[22]=o=>se.value=o),class:"trade-modal"},{default:s(()=>[t(ce,{class:"trade-modal"},{default:s(()=>[l("div",lt,[e[94]||(e[94]=l("h3",{class:"my-4"},"فاکتور استفاده از طلا",-1)),t(I,null,{default:s(()=>[t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",at,[e[81]||(e[81]=l("p",null,"گرم انتقال :",-1)),l("p",null,u(_.value.goldWeight),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",tt,[e[82]||(e[82]=l("p",null,"شماره فاکتور :",-1)),l("p",null,u(_.value.invoiceId),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",st,[e[83]||(e[83]=l("p",null,"تاریخ ایجاد :",-1)),l("p",null,u(_.value.date),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",ot,[e[84]||(e[84]=l("p",null,"زمان ایجاد :",-1)),l("p",null,u(_.value.time),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",nt,[e[85]||(e[85]=l("p",null,"قیمت لحظه ای :",-1)),l("p",null,u(C(_.value.goldPrice))+" تومان",1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",ut,[e[86]||(e[86]=l("p",null,"قیمت کل :",-1)),l("p",null,u(C(_.value.totalPrice))+" تومان",1)])]),_:1}),t(V),t(i,{cols:"12"},{default:s(()=>e[87]||(e[87]=[l("div",{class:"d-flex justify-start"},[l("p",{class:"font-weight-bold"},"اطلاعات کاربر")],-1)])),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",it,[e[88]||(e[88]=l("p",null,"نام :",-1)),l("p",null,u(_.value.user.firstName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",dt,[e[89]||(e[89]=l("p",null,"نام خانوادگی :",-1)),l("p",null,u(_.value.user.lastName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",rt,[e[90]||(e[90]=l("p",null,"کد ملی :",-1)),l("p",null,u(_.value.user.nationalCode),1)])]),_:1}),t(V),t(i,{cols:"12"},{default:s(()=>e[91]||(e[91]=[l("div",{class:"d-flex justify-start"},[l("p",{class:"font-weight-bold"},"اطلاعات فروشنده")],-1)])),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",vt,[e[92]||(e[92]=l("p",null,"نام :",-1)),l("p",null,u(_.value.seller.firstName),1)])]),_:1}),t(i,{cols:"6",class:"my-1 my-md-2 pa-1"},{default:s(()=>[l("div",ct,[e[93]||(e[93]=l("p",null,"نام خانوادگی :",-1)),l("p",null,u(_.value.seller.lastName),1)])]),_:1})]),_:1})]),l("div",pt,[t(y,{text:"تایید استفاده",class:"pay-btn",color:"#9D7E3B",block:"",loading:_e.value,onClick:Sl},null,8,["loading"])])]),_:1})]),_:1},8,["modelValue"]),d.value?(U(),N(ve,{key:0,color:"error",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:s(()=>[W(u(m.value),1)]),_:1})):X("",!0),L.value?(U(),N(ve,{key:1,color:"success",border:"bottom",elevation:"2",class:"k-alert alert-animatiton",closable:""},{default:s(()=>[W(u(ee.value),1)]),_:1})):X("",!0)])}}},wt=Ll(mt,[["__scopeId","data-v-4fec4705"]]);export{wt as default};
